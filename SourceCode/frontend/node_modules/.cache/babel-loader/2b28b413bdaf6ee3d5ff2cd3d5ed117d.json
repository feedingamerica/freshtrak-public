{"ast":null,"code":"import _slicedToArray from \"/var/www/html/midOhio/fresh-trak/sourceCode/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/var/www/html/midOhio/fresh-trak/sourceCode/frontend/src/Modules/Family/UpdateFamilyContainer.js\";\nimport React, { Component } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport { ajaxPut } from '../../Services/Http/Ajax';\nimport * as constants from '../../Utils/Constants';\nimport * as urls from '../../Utils/Urls';\nimport NameFormComponent from './NameFormComponent';\nimport AddressFormComponent from './AddressFormComponent';\nimport ZipFormComponent from './ZipFormComponent';\nimport ContactNumberFormComponent from './ContactNumberFormComponent';\nimport MemberCountFormComponent from './MemberCountFormComponent';\nimport DobFormComponent from './DobFormComponent';\nimport HousingTypeFormComponent from './HousingTypeFormComponent';\nimport MenuComponent from '../General/MenuComponent';\nimport FooterComponent from '../General/FooterComponent';\nimport Jumbotron from 'react-bootstrap/Jumbotron';\nimport Container from 'react-bootstrap/Container';\nimport Form from 'react-bootstrap/Form';\nimport Button from 'react-bootstrap/Button';\nimport { confirm, showMessage } from '../../Utils/Util';\nimport { STATUS_ACTIVE } from '../../Utils/Constants';\nimport { ajaxGet } from '../../Services/Http/Ajax';\nimport { ToastContainer } from 'react-toastify';\n\nconst UpdateFamilyContainer = props => {\n  const _React$useState = React.useState([]),\n        _React$useState2 = _slicedToArray(_React$useState, 2),\n        familyArray = _React$useState2[0],\n        setFamilyArray = _React$useState2[1];\n\n  const _React$useState3 = React.useState([]),\n        _React$useState4 = _slicedToArray(_React$useState3, 2),\n        childFamilyData = _React$useState4[0],\n        setChildFamilyData = _React$useState4[1];\n\n  let familyData = [];\n  let formError = '';\n  let familyDetails;\n  const nameFormRef = React.useRef();\n  const addressFormRef = React.useRef();\n  const zipFormRef = React.useRef();\n  const ContactNumberFormRef = React.useRef();\n\n  const handleFormValidation = e => {\n    e.preventDefault();\n    let componentErrors = [];\n    componentErrors.push(nameFormRef.current.triggerErrors(), zipFormRef.current.triggerErrors(), addressFormRef.current.triggerErrors());\n\n    if (componentErrors.includes(true) || Object.keys(formError).length !== 0) {\n      showMessage('error', 'Kindly fix all errors and continue');\n      return false;\n    }\n\n    handleSubmitConfirm();\n  };\n\n  React.useEffect(() => {\n    let familyId = props.location.state.familyId;\n    let uri = urls.API_URL.GET_FAMILY_UPDATE_DATA + '/' + familyId;\n    let familyData;\n    ajaxGet(uri, response => {\n      if (response.status === constants.STATUS_ACTIVE) {\n        familyData = response.content;\n        setFamilyArray(familyData);\n      }\n    });\n  }, []);\n\n  const stateChangeInName = data => {\n    setChildFamilyData(data);\n  };\n\n  const handleSubmit = () => {\n    let familyId = props.location.state.familyId;\n    let uri = urls.API_URL.PUT_FAMILY_UPDATE + '/' + familyId;\n    let familyDetails = {\n      familyMemberData: {\n        first_name: familyData.nameData ? familyData.nameData.nameData.first_name : '',\n        last_name: familyData.nameData ? familyData.nameData.nameData.last_name : '',\n        middle_name: familyData.nameData ? familyData.nameData.nameData.middle_name : '',\n        suffix: familyData.nameData ? familyData.nameData.nameData.suffix : '',\n        dob: familyData.dobData ? familyData.dobData.dobData.dob : '',\n        age: familyData.dobData ? familyData.dobData.dobData.age : '',\n        gender: familyData.dobData ? familyData.dobData.dobData.gender : '',\n        primary_contact: familyData.contactData ? familyData.contactData.contactData.primaryNumber : '',\n        secondary_contact: familyData.contactData ? familyData.contactData.contactData.secondaryNumber : ''\n      },\n      familyMemberLocationData: {\n        address: familyData.addressData ? familyData.addressData.addressData.streetAddress : '',\n        apt_number: familyData.addressData ? familyData.addressData.addressData.aptNo : '',\n        zipcode: familyData.zipData ? familyData.zipData.zipData.zip_code : '',\n        housing_type: familyData.housingData ? familyData.housingData.housingData.housing_type : ''\n      }\n    };\n\n    if (familyDetails) {\n      ajaxPut(uri, familyDetails, response => {\n        if (response.status === STATUS_ACTIVE) {\n          showMessage('success', 'Details updated successfully');\n        }\n      });\n    } else {\n      showMessage('error', 'Something went wrong');\n    }\n  };\n\n  const handleSubmitConfirm = e => {\n    e.preventDefault();\n    let title = 'Are you sure you want to proceed?';\n    confirm(title, handleSubmit);\n  };\n\n  const buildFamilyData = childFamilyData => {\n    let dataKey = Object.keys(childFamilyData)[0];\n    familyData[dataKey] = childFamilyData;\n  };\n\n  const formErrors = errors => {\n    formError = errors;\n  };\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129\n    },\n    __self: this\n  }, React.createElement(MenuComponent, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130\n    },\n    __self: this\n  }), React.createElement(Jumbotron, {\n    fluid: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131\n    },\n    __self: this\n  }, React.createElement(Container, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133\n    },\n    __self: this\n  }, \"Edit Family\"))), React.createElement(\"form\", {\n    onSubmit: handleSubmitConfirm,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136\n    },\n    __self: this\n  }, React.createElement(Form.Group, {\n    controlId: \"Form.ControlInput1\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138\n    },\n    __self: this\n  }, React.createElement(NameFormComponent, {\n    famData: familyArray,\n    onSelectedChild: buildFamilyData,\n    ref: nameFormRef,\n    onFormErrors: formErrors,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144\n    },\n    __self: this\n  }, React.createElement(AddressFormComponent, {\n    famData: familyArray,\n    onSelectedChild: buildFamilyData,\n    ref: addressFormRef,\n    onFormErrors: formErrors,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150\n    },\n    __self: this\n  }, React.createElement(HousingTypeFormComponent, {\n    famData: familyArray,\n    onSelectedChild: buildFamilyData,\n    onFormErrors: formErrors,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155\n    },\n    __self: this\n  }, React.createElement(ZipFormComponent, {\n    famData: familyArray,\n    onSelectedChild: buildFamilyData,\n    ref: zipFormRef,\n    onFormErrors: formErrors,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161\n    },\n    __self: this\n  }, React.createElement(ContactNumberFormComponent, {\n    famData: familyArray,\n    onSelectedChild: buildFamilyData,\n    ref: ContactNumberFormRef,\n    onFormErrors: formErrors,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167\n    },\n    __self: this\n  }, React.createElement(DobFormComponent, {\n    famData: familyArray,\n    onSelectedChild: buildFamilyData,\n    onFormErrors: formErrors,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168\n    },\n    __self: this\n  })), React.createElement(Jumbotron, {\n    fluid: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172\n    },\n    __self: this\n  }, React.createElement(Container, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173\n    },\n    __self: this\n  }, React.createElement(Button, {\n    type: \"submit\",\n    variant: \"primary\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174\n    },\n    __self: this\n  }, \"Submit\"))))), React.createElement(FooterComponent, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179\n    },\n    __self: this\n  }));\n};\n\nexport default UpdateFamilyContainer;","map":{"version":3,"sources":["/var/www/html/midOhio/fresh-trak/sourceCode/frontend/src/Modules/Family/UpdateFamilyContainer.js"],"names":["React","Component","Redirect","ajaxPut","constants","urls","NameFormComponent","AddressFormComponent","ZipFormComponent","ContactNumberFormComponent","MemberCountFormComponent","DobFormComponent","HousingTypeFormComponent","MenuComponent","FooterComponent","Jumbotron","Container","Form","Button","confirm","showMessage","STATUS_ACTIVE","ajaxGet","ToastContainer","UpdateFamilyContainer","props","useState","familyArray","setFamilyArray","childFamilyData","setChildFamilyData","familyData","formError","familyDetails","nameFormRef","useRef","addressFormRef","zipFormRef","ContactNumberFormRef","handleFormValidation","e","preventDefault","componentErrors","push","current","triggerErrors","includes","Object","keys","length","handleSubmitConfirm","useEffect","familyId","location","state","uri","API_URL","GET_FAMILY_UPDATE_DATA","response","status","content","stateChangeInName","data","handleSubmit","PUT_FAMILY_UPDATE","familyMemberData","first_name","nameData","last_name","middle_name","suffix","dob","dobData","age","gender","primary_contact","contactData","primaryNumber","secondary_contact","secondaryNumber","familyMemberLocationData","address","addressData","streetAddress","apt_number","aptNo","zipcode","zipData","zip_code","housing_type","housingData","title","buildFamilyData","dataKey","formErrors","errors"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport {Redirect} from 'react-router-dom';\nimport {ajaxPut} from '../../Services/Http/Ajax';\nimport * as constants from '../../Utils/Constants'\nimport * as urls from '../../Utils/Urls'\nimport NameFormComponent from './NameFormComponent';\nimport AddressFormComponent from './AddressFormComponent';\nimport ZipFormComponent from './ZipFormComponent';\nimport ContactNumberFormComponent from './ContactNumberFormComponent';\nimport MemberCountFormComponent from './MemberCountFormComponent';\nimport DobFormComponent from './DobFormComponent';\nimport HousingTypeFormComponent from './HousingTypeFormComponent';\nimport MenuComponent from '../General/MenuComponent';\nimport FooterComponent from '../General/FooterComponent';\nimport Jumbotron from 'react-bootstrap/Jumbotron';\nimport Container from 'react-bootstrap/Container';\nimport Form from 'react-bootstrap/Form';\nimport Button from 'react-bootstrap/Button';\nimport {confirm, showMessage} from '../../Utils/Util';\nimport {STATUS_ACTIVE} from '../../Utils/Constants';\nimport {ajaxGet} from '../../Services/Http/Ajax';\nimport {ToastContainer} from 'react-toastify';\n\n\nconst UpdateFamilyContainer = (props) => {\n\n    const [familyArray, setFamilyArray] = React.useState([]);\n    const [childFamilyData, setChildFamilyData] = React.useState([]);\n\n    let familyData = [];\n    let formError = '';\n    let familyDetails;\n    const nameFormRef = React.useRef();\n    const addressFormRef = React.useRef();\n    const zipFormRef = React.useRef();\n    const ContactNumberFormRef = React.useRef();\n\n\n    const handleFormValidation = (e) => {\n        e.preventDefault();\n        let componentErrors = [];\n        componentErrors.push(\n            nameFormRef.current.triggerErrors(),\n            zipFormRef.current.triggerErrors(),\n            addressFormRef.current.triggerErrors());\n        if( componentErrors.includes(true) ||\n            Object.keys(formError).length !== 0){\n            showMessage('error', 'Kindly fix all errors and continue');\n            return false;\n        }\n\n        handleSubmitConfirm();\n    };\n\n\n    React.useEffect(() => {\n        let familyId = props.location.state.familyId;\n        let uri = urls.API_URL.GET_FAMILY_UPDATE_DATA + '/' + familyId;\n        let familyData;\n        ajaxGet(uri, (response) => {\n            if (response.status === constants.STATUS_ACTIVE) {\n                familyData = response.content;\n                setFamilyArray(familyData);\n            }\n        });\n    }, []);\n\n    const stateChangeInName = (data) => {\n        setChildFamilyData(data);\n    };\n\n    const handleSubmit = () => {\n        let familyId = props.location.state.familyId;\n        let uri = urls.API_URL.PUT_FAMILY_UPDATE + '/' + familyId;\n\n        let familyDetails = {\n\n            familyMemberData: {\n                first_name: familyData.nameData ? familyData.nameData.nameData.first_name : '',\n                last_name: familyData.nameData ? familyData.nameData.nameData.last_name : '',\n                middle_name: familyData.nameData ? familyData.nameData.nameData.middle_name : '',\n                suffix: familyData.nameData ? familyData.nameData.nameData.suffix : '',\n                dob: familyData.dobData ? familyData.dobData.dobData.dob : '',\n                age: familyData.dobData ? familyData.dobData.dobData.age : '',\n                gender: familyData.dobData ? familyData.dobData.dobData.gender : '',\n                primary_contact: familyData.contactData ? familyData.contactData.contactData.primaryNumber : '',\n                secondary_contact: familyData.contactData ? familyData.contactData.contactData.secondaryNumber : '',\n            },\n\n            familyMemberLocationData:{\n                address: familyData.addressData ? familyData.addressData.addressData.streetAddress : '',\n                apt_number: familyData.addressData ? familyData.addressData.addressData.aptNo : '',\n                zipcode: familyData.zipData ? familyData.zipData.zipData.zip_code : '',\n                housing_type: familyData.housingData ? familyData.housingData.housingData.housing_type : '',\n            }\n\n        };\n        if(familyDetails) {\n            ajaxPut(uri, familyDetails, (response) => {\n                if (response.status === STATUS_ACTIVE) {\n                    showMessage('success', 'Details updated successfully');\n                }\n            });\n\n        } else {\n            showMessage('error', 'Something went wrong');\n        }\n    };\n\n    const handleSubmitConfirm = (e) => {\n        e.preventDefault();\n        let title = 'Are you sure you want to proceed?';\n        confirm(title, handleSubmit);\n    };\n\n    const buildFamilyData = (childFamilyData) => {\n        let dataKey = Object.keys(childFamilyData)[0];\n        familyData[dataKey] = childFamilyData;\n    };\n\n    const formErrors = (errors) => {\n        formError = errors;\n    };\n\n\n\n    return (\n\n        <div>\n            <MenuComponent/>\n            <Jumbotron fluid>\n                <Container>\n                    <h1>Edit Family</h1>\n                </Container>\n            </Jumbotron>\n            <form onSubmit={handleSubmitConfirm}>\n                <Form.Group controlId=\"Form.ControlInput1\">\n                    <div className=\"container\">\n                        <NameFormComponent famData={familyArray}\n                                           onSelectedChild = {buildFamilyData}\n                                           ref={nameFormRef}\n                                           onFormErrors = {formErrors} />\n                    </div>\n                    <div className=\"container\">\n                        <AddressFormComponent famData={familyArray}\n                                              onSelectedChild = {buildFamilyData}\n                                              ref={addressFormRef}\n                                              onFormErrors = {formErrors}/>\n                    </div>\n                    <div className=\"container\">\n                        <HousingTypeFormComponent famData={familyArray}\n                                                  onSelectedChild = {buildFamilyData}\n                                                  onFormErrors = {formErrors} />\n                    </div>\n                    <div className=\"container\">\n                        <ZipFormComponent  famData={familyArray}\n                                          onSelectedChild = {buildFamilyData}\n                                          ref={zipFormRef}\n                                          onFormErrors = {formErrors} />\n                    </div>\n                    <div className=\"container\">\n                        <ContactNumberFormComponent  famData={familyArray}\n                                                     onSelectedChild = {buildFamilyData}\n                                                     ref={ContactNumberFormRef}\n                                                     onFormErrors = {formErrors} />\n                    </div>\n                    <div className=\"container\">\n                        <DobFormComponent   famData={familyArray}\n                                           onSelectedChild = {buildFamilyData}\n                                           onFormErrors = {formErrors}  />\n                    </div>\n                    <Jumbotron fluid>\n                        <Container>\n                            <Button  type=\"submit\" variant=\"primary\" >Submit</Button>\n                        </Container>\n                    </Jumbotron>\n                </Form.Group>\n            </form>\n            <FooterComponent/>\n        </div>\n    )\n};\n\nexport default UpdateFamilyContainer;\n"]},"metadata":{},"sourceType":"module"}