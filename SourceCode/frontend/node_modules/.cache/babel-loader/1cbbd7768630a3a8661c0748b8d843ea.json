{"ast":null,"code":"import _slicedToArray from \"/var/www/html/midOhio/fresh-trak/sourceCode/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/var/www/html/midOhio/fresh-trak/sourceCode/frontend/src/Modules/Agency/AgencyComponent.js\";\nimport React, { useState, useEffect } from 'react';\nimport 'react-bootstrap';\nimport ImageUploadComponent from './ImageUploadComponent';\nimport AgencyDetailsComponent from './AgencyDetailsComponent';\nimport { ajaxPost, ajaxGet, ajaxPut } from '../../Services/Http/Ajax';\nimport * as constants from '../../Utils/Constants';\nimport { Redirect } from 'react-router-dom';\nimport { showMessage, confirm } from '../../Utils/Util';\nimport { API_URL } from '../../Utils/Urls';\nimport { STATUS_ACTIVE } from \"../../Utils/Constants\";\nimport { Form } from 'react-bootstrap';\nimport '../../App.css';\nimport { ToastContainer } from \"react-toastify\";\nimport MenuComponent from \"../General/MenuComponent\";\nlet formError = '';\n\nconst AgencyComponent = props => {\n  let _useState = useState({}),\n      _useState2 = _slicedToArray(_useState, 2),\n      agencyData = _useState2[0],\n      setAgencyData = _useState2[1];\n\n  const _useState3 = useState(props.location.state),\n        _useState4 = _slicedToArray(_useState3, 2),\n        id = _useState4[0],\n        setId = _useState4[1];\n\n  let isAgencyUpdate = !!props.location.state;\n  const agencyFormRef = React.useRef();\n\n  const handleFormValidation = e => {\n    e.preventDefault();\n    let componentErrors = [];\n    componentErrors.push(agencyFormRef.current.triggerErrors());\n\n    if (componentErrors.includes(true) || Object.keys(formError).length !== 0) {\n      showMessage('error', 'Kindly fix all errors and continue');\n      return false;\n    }\n\n    addAgencyConfirm();\n  };\n\n  useEffect(() => {\n    if (isAgencyUpdate) {\n      let agencyId = id.agencyId;\n      let uri = API_URL.EDITED_URL + '/' + agencyId + '/update';\n      ajaxGet(uri, response => {\n        if (response.status === STATUS_ACTIVE) {\n          setAgencyData(response.content);\n        } else {\n          showMessage('error', response.message);\n        }\n      });\n    }\n  }, []);\n\n  const buildAgencyData = childAgencyData => {\n    setAgencyData(childAgencyData);\n  };\n\n  const updateAgency = () => {\n    let payLoad = agencyData;\n    let agencyId = id.agencyId;\n    let uri = API_URL.EDITED_URL + '/' + agencyId + '/update';\n    ajaxPut(uri, payLoad, createFamilySuccess);\n  };\n\n  const createFamilySuccess = response => {\n    if (response.status === STATUS_ACTIVE) {\n      showMessage('success', response.message);\n    }\n  };\n\n  const addAgencyConfirm = e => {\n    let title = \"Are you sure you want to proceed?\";\n    confirm(title, addAgency);\n  };\n\n  const addAgency = () => {\n    if (isAgencyUpdate) {\n      updateAgency();\n    } else {\n      if (agencyData.agencyDetailsData) {\n        let uri = API_URL.AGENCY_URL;\n        ajaxPost(uri, agencyData.agencyDetailsData, response => {\n          if (response.status === constants.STATUS_ACTIVE) {\n            showMessage('success', response.message);\n          }\n        });\n      } else {\n        showMessage('error', 'Enter agency details');\n      }\n    }\n  };\n\n  const formErrors = errors => {\n    formError = errors;\n  };\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102\n    },\n    __self: this\n  }, React.createElement(MenuComponent, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103\n    },\n    __self: this\n  }), React.createElement(\"form\", {\n    className: \"form-horizontal\",\n    encType: \"multipart/form-data\",\n    onSubmit: handleFormValidation,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  }, React.createElement(AgencyDetailsComponent, {\n    ref: agencyFormRef,\n    propsDataOfParent: props,\n    agencyDataFromParent: agencyData,\n    agencyDataFromChild: buildAgencyData,\n    onFormErrors: formErrors,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  }), \"/>\", React.createElement(ToastContainer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111\n    },\n    __self: this\n  })));\n};\n\nexport default AgencyComponent;","map":{"version":3,"sources":["/var/www/html/midOhio/fresh-trak/sourceCode/frontend/src/Modules/Agency/AgencyComponent.js"],"names":["React","useState","useEffect","ImageUploadComponent","AgencyDetailsComponent","ajaxPost","ajaxGet","ajaxPut","constants","Redirect","showMessage","confirm","API_URL","STATUS_ACTIVE","Form","ToastContainer","MenuComponent","formError","AgencyComponent","props","agencyData","setAgencyData","location","state","id","setId","isAgencyUpdate","agencyFormRef","useRef","handleFormValidation","e","preventDefault","componentErrors","push","current","triggerErrors","includes","Object","keys","length","addAgencyConfirm","agencyId","uri","EDITED_URL","response","status","content","message","buildAgencyData","childAgencyData","updateAgency","payLoad","createFamilySuccess","title","addAgency","agencyDetailsData","AGENCY_URL","formErrors","errors"],"mappings":";;AAAA,OAAOA,KAAP,IAAcC,QAAd,EAAwBC,SAAxB,QAAwC,OAAxC;AACA,OAAO,iBAAP;AACA,OAAOC,oBAAP,MAAiC,wBAAjC;AACA,OAAOC,sBAAP,MAAmC,0BAAnC;AACA,SAAQC,QAAR,EAAiBC,OAAjB,EAAyBC,OAAzB,QAAuC,0BAAvC;AACA,OAAO,KAAKC,SAAZ,MAA2B,uBAA3B;AACA,SAAQC,QAAR,QAAuB,kBAAvB;AACA,SAAQC,WAAR,EAAoBC,OAApB,QAAkC,kBAAlC;AACA,SAAQC,OAAR,QAAsB,kBAAtB;AACA,SAAQC,aAAR,QAA4B,uBAA5B;AACA,SAAQC,IAAR,QAAmB,iBAAnB;AACA,OAAO,eAAP;AACA,SAAQC,cAAR,QAA6B,gBAA7B;AACA,OAAOC,aAAP,MAA0B,0BAA1B;AAEA,IAAIC,SAAS,GAAG,EAAhB;;AAEA,MAAMC,eAAe,GAAIC,KAAD,IAAW;AAAA,kBAEElB,QAAQ,CAAC,EAAD,CAFV;AAAA;AAAA,MAE1BmB,UAF0B;AAAA,MAEfC,aAFe;;AAAA,qBAGXpB,QAAQ,CAACkB,KAAK,CAACG,QAAN,CAAeC,KAAhB,CAHG;AAAA;AAAA,QAGxBC,EAHwB;AAAA,QAGpBC,KAHoB;;AAI/B,MAAIC,cAAc,GAAG,CAAC,CAACP,KAAK,CAACG,QAAN,CAAeC,KAAtC;AACA,QAAMI,aAAa,GAAG3B,KAAK,CAAC4B,MAAN,EAAtB;;AAEA,QAAMC,oBAAoB,GAAIC,CAAD,IAAO;AAChCA,IAAAA,CAAC,CAACC,cAAF;AACA,QAAIC,eAAe,GAAG,EAAtB;AACAA,IAAAA,eAAe,CAACC,IAAhB,CACIN,aAAa,CAACO,OAAd,CAAsBC,aAAtB,EADJ;;AAGA,QAAIH,eAAe,CAACI,QAAhB,CAAyB,IAAzB,KAAkCC,MAAM,CAACC,IAAP,CAAYrB,SAAZ,EAAuBsB,MAAvB,KAAkC,CAAxE,EAA0E;AACtE7B,MAAAA,WAAW,CAAC,OAAD,EAAU,oCAAV,CAAX;AACA,aAAO,KAAP;AACH;;AAED8B,IAAAA,gBAAgB;AACnB,GAZD;;AAeAtC,EAAAA,SAAS,CAAC,MAAM;AACZ,QAAIwB,cAAJ,EAAmB;AACf,UAAIe,QAAQ,GAAGjB,EAAE,CAACiB,QAAlB;AACA,UAAIC,GAAG,GAAG9B,OAAO,CAAC+B,UAAR,GAAqB,GAArB,GAA2BF,QAA3B,GAAsC,SAAhD;AACAnC,MAAAA,OAAO,CAACoC,GAAD,EAAOE,QAAD,IAAc;AACvB,YAAIA,QAAQ,CAACC,MAAT,KAAoBhC,aAAxB,EAAuC;AACnCQ,UAAAA,aAAa,CAACuB,QAAQ,CAACE,OAAV,CAAb;AACH,SAFD,MAGK;AACDpC,UAAAA,WAAW,CAAC,OAAD,EAASkC,QAAQ,CAACG,OAAlB,CAAX;AACH;AACJ,OAPM,CAAP;AAQH;AACJ,GAbQ,EAaN,EAbM,CAAT;;AAiBA,QAAMC,eAAe,GAAIC,eAAD,IAAqB;AACzC5B,IAAAA,aAAa,CAAC4B,eAAD,CAAb;AACH,GAFD;;AAIA,QAAMC,YAAY,GAAG,MAAM;AACvB,QAAIC,OAAO,GAAG/B,UAAd;AACA,QAAIqB,QAAQ,GAAGjB,EAAE,CAACiB,QAAlB;AACA,QAAIC,GAAG,GAAG9B,OAAO,CAAC+B,UAAR,GAAqB,GAArB,GAA2BF,QAA3B,GAAsC,SAAhD;AACAlC,IAAAA,OAAO,CAACmC,GAAD,EAAMS,OAAN,EAAeC,mBAAf,CAAP;AACH,GALD;;AAMA,QAAMA,mBAAmB,GAAIR,QAAD,IAAc;AACtC,QAAGA,QAAQ,CAACC,MAAT,KAAoBhC,aAAvB,EAAsC;AAClCH,MAAAA,WAAW,CAAC,SAAD,EAAWkC,QAAQ,CAACG,OAApB,CAAX;AACH;AACJ,GAJD;;AAMA,QAAMP,gBAAgB,GAAIV,CAAD,IAAO;AAC5B,QAAIuB,KAAK,GAAG,mCAAZ;AACA1C,IAAAA,OAAO,CAAC0C,KAAD,EAAQC,SAAR,CAAP;AACH,GAHD;;AAKA,QAAMA,SAAS,GAAG,MAAM;AACpB,QAAI5B,cAAJ,EAAoB;AAChBwB,MAAAA,YAAY;AACf,KAFD,MAGK;AACD,UAAI9B,UAAU,CAACmC,iBAAf,EAAkC;AAC9B,YAAIb,GAAG,GAAG9B,OAAO,CAAC4C,UAAlB;AACAnD,QAAAA,QAAQ,CAACqC,GAAD,EAAMtB,UAAU,CAACmC,iBAAjB,EAAqCX,QAAD,IAAc;AACtD,cAAIA,QAAQ,CAACC,MAAT,KAAoBrC,SAAS,CAACK,aAAlC,EAAiD;AAC7CH,YAAAA,WAAW,CAAC,SAAD,EAAYkC,QAAQ,CAACG,OAArB,CAAX;AACH;AACJ,SAJO,CAAR;AAKH,OAPD,MAQK;AACDrC,QAAAA,WAAW,CAAC,OAAD,EAAU,sBAAV,CAAX;AACH;AACJ;AACJ,GAjBD;;AAmBA,QAAM+C,UAAU,GAAIC,MAAD,IAAY;AAC3BzC,IAAAA,SAAS,GAAGyC,MAAZ;AACH,GAFD;;AAIA,SACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,aAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,EAEI;AAAM,IAAA,SAAS,EAAC,iBAAhB;AAAkC,IAAA,OAAO,EAAC,qBAA1C;AAAiE,IAAA,QAAQ,EAAE7B,oBAA3E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,sBAAD;AAAwB,IAAA,GAAG,EAAEF,aAA7B;AACwB,IAAA,iBAAiB,EAAER,KAD3C;AAEwB,IAAA,oBAAoB,EAAEC,UAF9C;AAGwB,IAAA,mBAAmB,EAAE4B,eAH7C;AAIwB,IAAA,YAAY,EAAIS,UAJxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,QAOI,oBAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAPJ,CAFJ,CADJ;AAcH,CAjGD;;AAkGA,eAAevC,eAAf","sourcesContent":["import React,{useState, useEffect} from 'react'\nimport 'react-bootstrap'\nimport ImageUploadComponent from './ImageUploadComponent'\nimport AgencyDetailsComponent from './AgencyDetailsComponent'\nimport {ajaxPost,ajaxGet,ajaxPut} from '../../Services/Http/Ajax';\nimport * as constants from '../../Utils/Constants'\nimport {Redirect} from 'react-router-dom';\nimport {showMessage,confirm} from '../../Utils/Util';\nimport {API_URL} from '../../Utils/Urls';\nimport {STATUS_ACTIVE} from \"../../Utils/Constants\";\nimport {Form} from 'react-bootstrap'\nimport '../../App.css';\nimport {ToastContainer} from \"react-toastify\";\nimport MenuComponent from \"../General/MenuComponent\";\n\nlet formError = '';\n\nconst AgencyComponent = (props) => {\n\n    let [agencyData,setAgencyData] = useState({});\n    const [id, setId] = useState(props.location.state);\n    let isAgencyUpdate = !!props.location.state;\n    const agencyFormRef = React.useRef();\n\n    const handleFormValidation = (e) => {\n        e.preventDefault();\n        let componentErrors = [];\n        componentErrors.push(\n            agencyFormRef.current.triggerErrors());\n\n        if( componentErrors.includes(true) || Object.keys(formError).length !== 0){\n            showMessage('error', 'Kindly fix all errors and continue');\n            return false;\n        }\n\n        addAgencyConfirm();\n    };\n\n\n    useEffect(() => {\n        if (isAgencyUpdate){\n            let agencyId = id.agencyId;\n            let uri = API_URL.EDITED_URL + '/' + agencyId + '/update';\n            ajaxGet(uri, (response) => {\n                if (response.status === STATUS_ACTIVE) {\n                    setAgencyData(response.content);\n                }\n                else {\n                    showMessage('error',response.message)\n                }\n            })\n        }\n    }, []);\n\n\n\n    const buildAgencyData = (childAgencyData) => {\n        setAgencyData(childAgencyData);\n    };\n\n    const updateAgency = () => {\n        let payLoad = agencyData;\n        let agencyId = id.agencyId;\n        let uri = API_URL.EDITED_URL + '/' + agencyId + '/update';\n        ajaxPut(uri, payLoad, createFamilySuccess)\n    };\n    const createFamilySuccess = (response) => {\n        if(response.status === STATUS_ACTIVE) {\n            showMessage('success',response.message);\n        }\n    };\n\n    const addAgencyConfirm = (e) => {\n        let title = \"Are you sure you want to proceed?\";\n        confirm(title, addAgency)\n    };\n\n    const addAgency = () => {\n        if (isAgencyUpdate) {\n            updateAgency();\n        }\n        else {\n            if (agencyData.agencyDetailsData) {\n                let uri = API_URL.AGENCY_URL;\n                ajaxPost(uri, agencyData.agencyDetailsData, (response) => {\n                    if (response.status === constants.STATUS_ACTIVE) {\n                        showMessage('success', response.message)\n                    }\n                });\n            }\n            else {\n                showMessage('error', 'Enter agency details')\n            }\n        }\n    };\n\n    const formErrors = (errors) => {\n        formError = errors;\n    };\n\n    return (\n        <div>\n            <MenuComponent/>\n            <form className=\"form-horizontal\" encType=\"multipart/form-data\"  onSubmit={handleFormValidation}>\n                <AgencyDetailsComponent ref={agencyFormRef}\n                                        propsDataOfParent={props}\n                                        agencyDataFromParent={agencyData}\n                                        agencyDataFromChild={buildAgencyData}\n                                        onFormErrors = {formErrors}/>\n                />\n                <ToastContainer/>\n            </form>\n        </div>\n    )\n};\nexport default AgencyComponent"]},"metadata":{},"sourceType":"module"}