{"ast":null,"code":"import _slicedToArray from \"/var/www/html/midOhio/fresh-trak/sourceCode/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/var/www/html/midOhio/fresh-trak/sourceCode/frontend/src/Modules/Users/CreateEditUsersComponent.js\";\n\n/**\n * Created by abhiram on 5/2/20.\n */\nimport React from 'react';\nimport MenuComponent from '../General/MenuComponent';\nimport FooterComponent from '../General/FooterComponent';\nimport '../../App.css';\nimport RoleSelectionComponent from '../General/RoleSelectionComponent';\nimport { validateEmail, validatePassword } from '../../Utils/FormValidation';\nimport { ajaxPost, ajaxGet, ajaxPut } from '../../Services/Http/Ajax';\nimport { STATUS_ACTIVE } from '../../Utils/Constants';\nimport { API_URL } from '../../Utils/Urls';\nimport { confirm, showMessage } from '../../Utils/Util';\nimport { ToastContainer } from \"react-toastify\";\nlet isEmailValid = false;\nlet isPasswordValid = false;\nlet isConfirmPasswordValid = false;\n\nconst CreateEditUsersComponent = props => {\n  const _React$useState = React.useState(''),\n        _React$useState2 = _slicedToArray(_React$useState, 2),\n        role = _React$useState2[0],\n        setRole = _React$useState2[1];\n\n  const _React$useState3 = React.useState(''),\n        _React$useState4 = _slicedToArray(_React$useState3, 2),\n        name = _React$useState4[0],\n        setName = _React$useState4[1];\n\n  const _React$useState5 = React.useState(''),\n        _React$useState6 = _slicedToArray(_React$useState5, 2),\n        email = _React$useState6[0],\n        setEmail = _React$useState6[1];\n\n  const _React$useState7 = React.useState(''),\n        _React$useState8 = _slicedToArray(_React$useState7, 2),\n        password = _React$useState8[0],\n        setPassword = _React$useState8[1];\n\n  const _React$useState9 = React.useState(''),\n        _React$useState10 = _slicedToArray(_React$useState9, 2),\n        confirmPassword = _React$useState10[0],\n        setConfirmPassword = _React$useState10[1];\n\n  const _React$useState11 = React.useState(''),\n        _React$useState12 = _slicedToArray(_React$useState11, 2),\n        emailError = _React$useState12[0],\n        setEmailError = _React$useState12[1];\n\n  const _React$useState13 = React.useState(''),\n        _React$useState14 = _slicedToArray(_React$useState13, 2),\n        passwordError = _React$useState14[0],\n        setPasswordError = _React$useState14[1];\n\n  const _React$useState15 = React.useState(''),\n        _React$useState16 = _slicedToArray(_React$useState15, 2),\n        confirmPasswordError = _React$useState16[0],\n        setConfirmPasswordError = _React$useState16[1];\n\n  let isUserUpdate = !!props.location.state;\n  let buttonLabel = isUserUpdate ? 'Update' : 'Register';\n\n  const handleChange = event => {\n    event.preventDefault();\n    let name = event.target.name;\n\n    switch (name) {\n      case 'email':\n        setEmail(event.target.value);\n        let emailErrorValue = validateEmail(event.target.value) ? isEmailValid = true : 'Please enter a valid email';\n        setEmailError(emailErrorValue);\n        break;\n\n      case 'password':\n        setPassword(event.target.value);\n        let passwordErrorValue = validatePassword(event.target.value) ? isPasswordValid = true : 'Please enter the password';\n        setPasswordError(passwordErrorValue);\n        break;\n\n      case 'username':\n        setName(event.target.value);\n        break;\n\n      case 'password_confirm':\n        setConfirmPassword(event.target.value);\n        let confirmPasswordError = validateConfirmPassword(event.target.value) ? isConfirmPasswordValid = true : 'Password should match';\n        setConfirmPasswordError(confirmPasswordError);\n        break;\n\n      default:\n        break;\n    }\n  };\n\n  const validateConfirmPassword = confirmPasswordContent => {\n    let confirmPasswordValid = true;\n\n    if (confirmPasswordContent !== password) {\n      confirmPasswordValid = false;\n    }\n\n    return confirmPasswordValid;\n  };\n\n  const handleChangeInRole = roleId => {\n    setRole(roleId);\n  };\n\n  const createFamily = e => {\n    e.preventDefault();\n    let title = 'Are you sure you want to proceed?';\n    confirm(title, createFamilyConfirm);\n  };\n\n  const createFamilyConfirm = () => {\n    if (isUserUpdate) {\n      updateFamily();\n    } else {\n      let data = {\n        data: {\n          name: name,\n          email: email,\n          password: password,\n          role_id: role\n        }\n      };\n      let uri = API_URL.CREATE_USER_URL;\n      ajaxPost(uri, data, createFamilySuccess);\n    }\n  };\n\n  const updateFamily = () => {\n    let data = {\n      data: {\n        name: name,\n        email: email,\n        user_id: props.location.state.userId,\n        role_id: role\n      }\n    };\n    let uri = API_URL.UPDATE_USER_DATA_URL;\n    ajaxPut(uri, data, createFamilySuccess);\n  };\n\n  const createFamilySuccess = response => {\n    if (response.status === STATUS_ACTIVE) {\n      showMessage('success', response.message);\n    }\n  };\n\n  React.useEffect(() => {\n    if (isUserUpdate) {\n      let uri = API_URL.GET_USER_DATA_URL + props.location.state.userId;\n      ajaxGet(uri, response => {\n        if (response.status === STATUS_ACTIVE) {\n          setName(response.content[0].name);\n          setEmail(response.content[0].email);\n          setRole(response.content[0].role_id);\n        }\n      });\n    }\n  }, []);\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126\n    },\n    __self: this\n  }, React.createElement(MenuComponent, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127\n    },\n    __self: this\n  }), React.createElement(ToastContainer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128\n    },\n    __self: this\n  }), React.createElement(\"form\", {\n    onSubmit: createFamily,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    id: \"legend\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131\n    },\n    __self: this\n  }, React.createElement(\"legend\", {\n    className: \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132\n    },\n    __self: this\n  }, \"Register\")), React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    className: \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135\n    },\n    __self: this\n  }, \"Username\"), React.createElement(\"div\", {\n    className: \"controls\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"text\",\n    id: \"username\",\n    name: \"username\",\n    onChange: handleChange,\n    className: \"input-xlarge\",\n    value: name,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    className: \"control-label\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142\n    },\n    __self: this\n  }, \"E-mail\"), React.createElement(\"div\", {\n    className: \"controls\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"text\",\n    id: \"email\",\n    name: \"email\",\n    onChange: handleChange,\n    className: \"input-xlarge\",\n    value: email,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144\n    },\n    __self: this\n  }), React.createElement(\"span\", {\n    className: \"validationError\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145\n    },\n    __self: this\n  }, emailError))), !isUserUpdate && React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    className: \"control-label\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151\n    },\n    __self: this\n  }, \"Password\"), React.createElement(\"div\", {\n    className: \"controls\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"password\",\n    id: \"password\",\n    name: \"password\",\n    onBlur: handleChange,\n    className: \"input-xlarge\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153\n    },\n    __self: this\n  }), React.createElement(\"span\", {\n    className: \"validationError\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155\n    },\n    __self: this\n  }, passwordError))), !isUserUpdate && React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    className: \"control-label\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162\n    },\n    __self: this\n  }, \"Password (Confirm)\"), React.createElement(\"div\", {\n    className: \"controls\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"password\",\n    id: \"password_confirm\",\n    name: \"password_confirm\",\n    onBlur: handleChange,\n    className: \"input-xlarge\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164\n    },\n    __self: this\n  }), React.createElement(\"span\", {\n    className: \"validationError\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166\n    },\n    __self: this\n  }, confirmPasswordError), React.createElement(\"p\", {\n    className: \"help-block\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"control-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171\n    },\n    __self: this\n  }, React.createElement(RoleSelectionComponent, {\n    onSelectedRole: handleChangeInRole,\n    roleId: role,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"btn btn-success\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177\n    },\n    __self: this\n  }, buttonLabel))))), React.createElement(FooterComponent, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182\n    },\n    __self: this\n  }));\n};\n\nexport default CreateEditUsersComponent;","map":{"version":3,"sources":["/var/www/html/midOhio/fresh-trak/sourceCode/frontend/src/Modules/Users/CreateEditUsersComponent.js"],"names":["React","MenuComponent","FooterComponent","RoleSelectionComponent","validateEmail","validatePassword","ajaxPost","ajaxGet","ajaxPut","STATUS_ACTIVE","API_URL","confirm","showMessage","ToastContainer","isEmailValid","isPasswordValid","isConfirmPasswordValid","CreateEditUsersComponent","props","useState","role","setRole","name","setName","email","setEmail","password","setPassword","confirmPassword","setConfirmPassword","emailError","setEmailError","passwordError","setPasswordError","confirmPasswordError","setConfirmPasswordError","isUserUpdate","location","state","buttonLabel","handleChange","event","preventDefault","target","value","emailErrorValue","passwordErrorValue","validateConfirmPassword","confirmPasswordContent","confirmPasswordValid","handleChangeInRole","roleId","createFamily","e","title","createFamilyConfirm","updateFamily","data","role_id","uri","CREATE_USER_URL","createFamilySuccess","user_id","userId","UPDATE_USER_DATA_URL","response","status","message","useEffect","GET_USER_DATA_URL","content"],"mappings":"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","sourcesContent":["/**\n * Created by abhiram on 5/2/20.\n */\n\nimport React from 'react';\nimport MenuComponent from '../General/MenuComponent';\nimport FooterComponent from '../General/FooterComponent';\nimport '../../App.css';\nimport RoleSelectionComponent from '../General/RoleSelectionComponent';\nimport {validateEmail, validatePassword} from '../../Utils/FormValidation';\nimport {ajaxPost, ajaxGet, ajaxPut} from '../../Services/Http/Ajax';\nimport {STATUS_ACTIVE} from '../../Utils/Constants'\nimport {API_URL} from '../../Utils/Urls';\nimport {confirm, showMessage} from '../../Utils/Util';\nimport {ToastContainer} from \"react-toastify\";\nlet isEmailValid = false; let isPasswordValid = false; let isConfirmPasswordValid = false;\n\nconst CreateEditUsersComponent = (props) => {\n\n    const [role, setRole] = React.useState('');\n    const [name, setName] = React.useState('');\n    const [email, setEmail] = React.useState('');\n    const [password, setPassword] = React.useState('');\n    const [confirmPassword, setConfirmPassword] = React.useState('');\n    const [emailError, setEmailError] = React.useState('');\n    const [passwordError, setPasswordError] = React.useState('');\n    const [confirmPasswordError, setConfirmPasswordError] = React.useState('');\n    let isUserUpdate = !!props.location.state;\n    let buttonLabel = isUserUpdate ? 'Update': 'Register';\n\n    const handleChange = (event) => {\n        event.preventDefault();\n        let name = event.target.name;\n        switch (name) {\n            case 'email':\n                setEmail(event.target.value);\n                let emailErrorValue = validateEmail(event.target.value) ? isEmailValid = true : 'Please enter a valid email';\n                setEmailError(emailErrorValue);\n                break;\n            case 'password':\n                setPassword(event.target.value);\n                let passwordErrorValue = validatePassword(event.target.value) ? isPasswordValid = true : 'Please enter the password';\n                setPasswordError(passwordErrorValue);\n                break;\n            case 'username':\n                setName(event.target.value);\n                break;\n            case 'password_confirm':\n                setConfirmPassword(event.target.value);\n                let confirmPasswordError = validateConfirmPassword(event.target.value) ? isConfirmPasswordValid = true : 'Password should match';\n                setConfirmPasswordError(confirmPasswordError);\n                break;\n            default:\n                break;\n        }\n    };\n\n    const validateConfirmPassword = (confirmPasswordContent) => {\n        let confirmPasswordValid = true;\n        if(confirmPasswordContent !== password) {\n            confirmPasswordValid =  false;\n        }\n        return confirmPasswordValid;\n    };\n\n    const handleChangeInRole = (roleId) => {\n        setRole(roleId);\n    };\n\n    const createFamily = (e) => {\n        e.preventDefault();\n        let title = 'Are you sure you want to proceed?';\n        confirm(title, createFamilyConfirm);\n    };\n\n    const createFamilyConfirm = () => {\n        if(isUserUpdate) {\n            updateFamily()\n        } else {\n            let data = {\n                data: {\n                    name: name,\n                    email: email,\n                    password: password,\n                    role_id: role\n                }\n            };\n            let uri = API_URL.CREATE_USER_URL;\n            ajaxPost(uri, data, createFamilySuccess)\n        }\n    };\n\n    const updateFamily = () => {\n        let data = {\n            data: {\n                name: name,\n                email: email,\n                user_id: props.location.state.userId,\n                role_id: role\n            }\n        };\n        let uri = API_URL.UPDATE_USER_DATA_URL;\n        ajaxPut(uri, data, createFamilySuccess)\n    };\n\n    const createFamilySuccess = (response) => {\n        if(response.status === STATUS_ACTIVE) {\n            showMessage('success', response.message);\n        }\n    };\n\n    React.useEffect(() => {\n        if(isUserUpdate) {\n            let uri = API_URL.GET_USER_DATA_URL + props.location.state.userId;\n            ajaxGet(uri, (response) => {\n                if (response.status === STATUS_ACTIVE) {\n                    setName(response.content[0].name);\n                    setEmail(response.content[0].email);\n                    setRole(response.content[0].role_id);\n                }\n            });\n        }\n    }, []);\n\n    return (\n        <div>\n            <MenuComponent/>\n            <ToastContainer/>\n            <form onSubmit={createFamily}>\n                    <div className=\"form-group\">\n                    <div id=\"legend\">\n                        <legend className=\"\">Register</legend>\n                    </div>\n                    <div className=\"form-group\">\n                        <label className=\"\" >Username</label>\n                        <div className=\"controls\">\n                            <input type=\"text\" id=\"username\" name=\"username\" onChange={handleChange} className=\"input-xlarge\" value={name}/>\n                        </div>\n                    </div>\n\n                    <div className=\"form-group\">\n                        <label className=\"control-label\">E-mail</label>\n                        <div className=\"controls\">\n                            <input type=\"text\" id=\"email\" name=\"email\" onChange={handleChange} className=\"input-xlarge\" value={email}/>\n                            {<span className='validationError'>{emailError}</span>}\n                        </div>\n                    </div>\n\n                    {!isUserUpdate &&\n                    (<div className=\"form-group\">\n                        <label className=\"control-label\">Password</label>\n                        <div className=\"controls\">\n                            <input type=\"password\" id=\"password\" name=\"password\" onBlur={handleChange}\n                                   className=\"input-xlarge\"/>\n                            {<span className='validationError'>{passwordError}</span>}\n                        </div>\n                    </div>)\n                    }\n\n                    {!isUserUpdate &&\n                    (<div className=\"form-group\">\n                        <label className=\"control-label\">Password (Confirm)</label>\n                        <div className=\"controls\">\n                            <input type=\"password\" id=\"password_confirm\" name=\"password_confirm\" onBlur={handleChange}\n                                   className=\"input-xlarge\"/>\n                            {<span className='validationError'>{confirmPasswordError}</span>}\n                            <p className=\"help-block\"></p>\n                        </div>\n                    </div>)\n                    }\n                    <div className=\"control-group\">\n                        <RoleSelectionComponent onSelectedRole = {handleChangeInRole} roleId={role}/>\n                    </div>\n\n                    <div className=\"form-group\">\n                        <div className=\"form-group\">\n                            <button type=\"submit\" className=\"btn btn-success\">{buttonLabel}</button>\n                        </div>\n                    </div>\n                    </div>\n            </form>\n            <FooterComponent/>\n        </div>\n    )\n\n};\n\nexport default CreateEditUsersComponent;"]},"metadata":{},"sourceType":"module"}