{"ast":null,"code":"import _objectSpread from \"/var/www/html/midOhio/fresh-trak/sourceCode/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"/var/www/html/midOhio/fresh-trak/sourceCode/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/var/www/html/midOhio/fresh-trak/sourceCode/frontend/src/Modules/ModulePermission/ModulePermissionComponent.js\";\n\n/**\n * Created by basil on 20/2/20.\n */\nimport React from 'react';\nimport '../../App.css';\nimport { showMessage } from '../../Utils/Util';\nimport { STATUS_ACTIVE } from '../../Utils/Constants';\nimport { API_URL } from '../../Utils/Urls';\nimport { ajaxPost, ajaxPut } from '../../Services/Http/Ajax';\nimport Checkbox from \"../General/CheckBoxComponent\";\nimport { ToastContainer } from \"react-toastify\";\n\nconst ModulePermissionComponent = props => {\n  const _React$useState = React.useState(false),\n        _React$useState2 = _slicedToArray(_React$useState, 2),\n        moduleFetched = _React$useState2[0],\n        setModuleFetched = _React$useState2[1];\n\n  const _React$useState3 = React.useState([]),\n        _React$useState4 = _slicedToArray(_React$useState3, 2),\n        modulePermissionArray = _React$useState4[0],\n        setModulePermissionArray = _React$useState4[1];\n\n  const _React$useState5 = React.useState(false),\n        _React$useState6 = _slicedToArray(_React$useState5, 2),\n        isMainModuleActive = _React$useState6[0],\n        setIsMainModuleActive = _React$useState6[1];\n\n  const moduleId = props.moduleId,\n        roleId = props.roleId,\n        agencyId = props.agencyId;\n\n  const usePrevious = value => {\n    const ref = React.useRef();\n    React.useEffect(() => {\n      ref.current = value;\n    });\n    return ref.current;\n  };\n\n  console.log('add');\n  const previousModuleId = usePrevious(moduleId);\n  const previousRoleId = usePrevious(roleId);\n  const previousAgencyId = usePrevious(agencyId);\n\n  const getModulePermissionData = () => {\n    if (roleId && moduleId) {\n      let postData = {\n        data: {\n          roleId: roleId,\n          moduleId: moduleId,\n          agencyId: agencyId\n        }\n      };\n      let uri = API_URL.GET_MODULE_PERMISSION_URL;\n      ajaxPost(uri, postData, getModulePermissionDataSuccess);\n    }\n  };\n\n  const getModulePermissionDataSuccess = response => {\n    if (response.status === STATUS_ACTIVE) {\n      let moduleData;\n      moduleData = response.content;\n      let moduleNewTemp = moduleData.map(item => {\n        return _objectSpread({}, item);\n      });\n      console.log('>>>', moduleNewTemp);\n      setModulePermissionArray(moduleNewTemp);\n      setModuleFetched(true);\n      setIsMainModuleActive(moduleNewTemp[0].permission_is_active);\n      console.log();\n      /* console.log(modulePermissionArray[0].module_name);*/\n\n      /*setIsMainModuleActive(moduleNewTemp[0].permission_is_active);*/\n    }\n  };\n\n  const moduleCheckBoxDisabled = e => {\n    setIsMainModuleActive(e.target.checked);\n  };\n\n  React.useEffect(() => {\n    if (previousModuleId !== moduleId || previousRoleId.roleId !== roleId || previousAgencyId !== agencyId) {\n      getModulePermissionData();\n    }\n  }, [moduleId, roleId, agencyId]);\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"data-bind-role\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }, moduleFetched && {\n    /* <div className=\"data-bind-role\">\n        <span className=\"btn text-info\"> {subMenuArray[0].menu_name} <input onChange={makeSubMenuCheckBoxDisabled} checked={isMainMenuActive} type=\"checkBox\" name=\"menuPermission\"/></span>\n        <div>\n            { subMenuArray.map( (value, index) => {\n                return <div key={index}>\n                    <div className=\"sub-menu-container\">\n                        <div>{value.sub_menu_name} </div>\n                        <div> <Checkbox name={`submenu-${value.sub_menu_id}`} dataid={value.menu_permission_id} id={value.sub_menu_id} checked={value['is_active']} disabled = {!isMainMenuActive} onChangeFunction={handleChange} /></div>\n                    </div>\n                </div>\n            })\n            }\n        </div>\n    </div>*/\n  }));\n};\n\nexport default ModulePermissionComponent;","map":{"version":3,"sources":["/var/www/html/midOhio/fresh-trak/sourceCode/frontend/src/Modules/ModulePermission/ModulePermissionComponent.js"],"names":["React","showMessage","STATUS_ACTIVE","API_URL","ajaxPost","ajaxPut","Checkbox","ToastContainer","ModulePermissionComponent","props","useState","moduleFetched","setModuleFetched","modulePermissionArray","setModulePermissionArray","isMainModuleActive","setIsMainModuleActive","moduleId","roleId","agencyId","usePrevious","value","ref","useRef","useEffect","current","console","log","previousModuleId","previousRoleId","previousAgencyId","getModulePermissionData","postData","data","uri","GET_MODULE_PERMISSION_URL","getModulePermissionDataSuccess","response","status","moduleData","content","moduleNewTemp","map","item","permission_is_active","moduleCheckBoxDisabled","e","target","checked"],"mappings":";;;;AAAA;;;AAIA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,eAAP;AACA,SAAQC,WAAR,QAA0B,kBAA1B;AACA,SAAQC,aAAR,QAA4B,uBAA5B;AACA,SAAQC,OAAR,QAAsB,kBAAtB;AACA,SAAQC,QAAR,EAAiBC,OAAjB,QAA+B,0BAA/B;AACA,OAAOC,QAAP,MAAqB,8BAArB;AACA,SAAQC,cAAR,QAA6B,gBAA7B;;AAEA,MAAMC,yBAAyB,GAAIC,KAAD,IAAW;AAAA,0BACCT,KAAK,CAACU,QAAN,CAAe,KAAf,CADD;AAAA;AAAA,QAClCC,aADkC;AAAA,QACnBC,gBADmB;;AAAA,2BAEiBZ,KAAK,CAACU,QAAN,CAAe,EAAf,CAFjB;AAAA;AAAA,QAElCG,qBAFkC;AAAA,QAEXC,wBAFW;;AAAA,2BAGWd,KAAK,CAACU,QAAN,CAAe,KAAf,CAHX;AAAA;AAAA,QAGlCK,kBAHkC;AAAA,QAGdC,qBAHc;;AAAA,QAIlCC,QAJkC,GAIJR,KAJI,CAIlCQ,QAJkC;AAAA,QAIxBC,MAJwB,GAIJT,KAJI,CAIxBS,MAJwB;AAAA,QAIjBC,QAJiB,GAIJV,KAJI,CAIjBU,QAJiB;;AAKzC,QAAMC,WAAW,GAAIC,KAAD,IAAW;AAC3B,UAAMC,GAAG,GAAGtB,KAAK,CAACuB,MAAN,EAAZ;AACAvB,IAAAA,KAAK,CAACwB,SAAN,CAAgB,MAAM;AAClBF,MAAAA,GAAG,CAACG,OAAJ,GAAcJ,KAAd;AACH,KAFD;AAGA,WAAOC,GAAG,CAACG,OAAX;AACH,GAND;;AAMGC,EAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ;AACH,QAAMC,gBAAgB,GAAGR,WAAW,CAACH,QAAD,CAApC;AACA,QAAMY,cAAc,GAAGT,WAAW,CAACF,MAAD,CAAlC;AACA,QAAMY,gBAAgB,GAAGV,WAAW,CAACD,QAAD,CAApC;;AACA,QAAMY,uBAAuB,GAAG,MAAM;AAClC,QAAIb,MAAM,IAAID,QAAd,EAAwB;AACpB,UAAIe,QAAQ,GAAG;AACXC,QAAAA,IAAI,EAAC;AACDf,UAAAA,MAAM,EAAEA,MADP;AAEDD,UAAAA,QAAQ,EAAEA,QAFT;AAGDE,UAAAA,QAAQ,EAACA;AAHR;AADM,OAAf;AAOA,UAAIe,GAAG,GAAG/B,OAAO,CAACgC,yBAAlB;AACF/B,MAAAA,QAAQ,CAAC8B,GAAD,EAAMF,QAAN,EAAgBI,8BAAhB,CAAR;AACD;AACJ,GAZD;;AAaA,QAAMA,8BAA8B,GAAIC,QAAD,IAAc;AACjD,QAAIA,QAAQ,CAACC,MAAT,KAAoBpC,aAAxB,EAAuC;AACnC,UAAIqC,UAAJ;AACAA,MAAAA,UAAU,GAAGF,QAAQ,CAACG,OAAtB;AACA,UAAIC,aAAa,GAAGF,UAAU,CAACG,GAAX,CAAgBC,IAAD,IAAS;AAAE,iCAAWA,IAAX;AAAoB,OAA9C,CAApB;AACAjB,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ,EAAkBc,aAAlB;AACA3B,MAAAA,wBAAwB,CAAC2B,aAAD,CAAxB;AACA7B,MAAAA,gBAAgB,CAAC,IAAD,CAAhB;AACAI,MAAAA,qBAAqB,CAACyB,aAAa,CAAC,CAAD,CAAb,CAAiBG,oBAAlB,CAArB;AACAlB,MAAAA,OAAO,CAACC,GAAR;AACD;;AACC;AACH;AACJ,GAbD;;AAcA,QAAMkB,sBAAsB,GAAIC,CAAD,IAAO;AAClC9B,IAAAA,qBAAqB,CAAC8B,CAAC,CAACC,MAAF,CAASC,OAAV,CAArB;AACH,GAFD;;AAGAhD,EAAAA,KAAK,CAACwB,SAAN,CAAgB,MAAM;AAClB,QAAGI,gBAAgB,KAAKX,QAArB,IAAiCY,cAAc,CAACX,MAAf,KAA0BA,MAA3D,IAAqEY,gBAAgB,KAAKX,QAA7F,EAAuG;AACnGY,MAAAA,uBAAuB;AAC1B;AACJ,GAJD,EAIG,CAACd,QAAD,EAAWC,MAAX,EAAkBC,QAAlB,CAJH;AAKA,SACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI;AAAK,IAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEQR,aAAa,IACV;AAAC;;;;;;;;;;;;;;AAAD,GAHX,CADJ,CADJ;AAuBH,CAzED;;AA2EA,eAAeH,yBAAf","sourcesContent":["/**\n * Created by basil on 20/2/20.\n */\n\nimport React from 'react';\nimport '../../App.css';\nimport {showMessage} from '../../Utils/Util';\nimport {STATUS_ACTIVE} from '../../Utils/Constants';\nimport {API_URL} from '../../Utils/Urls';\nimport {ajaxPost,ajaxPut} from '../../Services/Http/Ajax';\nimport Checkbox from \"../General/CheckBoxComponent\";\nimport {ToastContainer} from \"react-toastify\";\n\nconst ModulePermissionComponent = (props) => {\n    const [moduleFetched, setModuleFetched] = React.useState(false);\n    const [modulePermissionArray, setModulePermissionArray] = React.useState([]);\n    const [isMainModuleActive, setIsMainModuleActive] = React.useState(false);\n    const {moduleId, roleId,agencyId } = props;\n    const usePrevious = (value) => {\n        const ref = React.useRef();\n        React.useEffect(() => {\n            ref.current = value;\n        });\n        return ref.current;\n    }; console.log('add');\n    const previousModuleId = usePrevious(moduleId);\n    const previousRoleId = usePrevious(roleId);\n    const previousAgencyId = usePrevious(agencyId);\n    const getModulePermissionData = () => {\n        if (roleId && moduleId) {\n            let postData = {\n                data:{\n                    roleId: roleId,\n                    moduleId: moduleId,\n                    agencyId:agencyId\n                }\n            };\n            let uri = API_URL.GET_MODULE_PERMISSION_URL;\n          ajaxPost(uri, postData, getModulePermissionDataSuccess)\n        }\n    };\n    const getModulePermissionDataSuccess = (response) => {\n        if (response.status === STATUS_ACTIVE) {\n            let moduleData;\n            moduleData = response.content;\n            let moduleNewTemp = moduleData.map((item)=> { return {...item }  } );\n            console.log('>>>',moduleNewTemp);\n            setModulePermissionArray(moduleNewTemp);\n            setModuleFetched(true);\n            setIsMainModuleActive(moduleNewTemp[0].permission_is_active);\n            console.log();\n           /* console.log(modulePermissionArray[0].module_name);*/\n            /*setIsMainModuleActive(moduleNewTemp[0].permission_is_active);*/\n        }\n    };\n    const moduleCheckBoxDisabled = (e) => {\n        setIsMainModuleActive(e.target.checked);\n    };\n    React.useEffect(() => {\n        if(previousModuleId !== moduleId || previousRoleId.roleId !== roleId || previousAgencyId !== agencyId) {\n            getModulePermissionData();\n        }\n    }, [moduleId, roleId,agencyId]);\n    return (\n        <div>\n            <div className=\"data-bind-role\">\n                {\n                    moduleFetched && (\n                       {/* <div className=\"data-bind-role\">\n                            <span className=\"btn text-info\"> {subMenuArray[0].menu_name} <input onChange={makeSubMenuCheckBoxDisabled} checked={isMainMenuActive} type=\"checkBox\" name=\"menuPermission\"/></span>\n                            <div>\n                                { subMenuArray.map( (value, index) => {\n                                    return <div key={index}>\n                                        <div className=\"sub-menu-container\">\n                                            <div>{value.sub_menu_name} </div>\n                                            <div> <Checkbox name={`submenu-${value.sub_menu_id}`} dataid={value.menu_permission_id} id={value.sub_menu_id} checked={value['is_active']} disabled = {!isMainMenuActive} onChangeFunction={handleChange} /></div>\n                                        </div>\n                                    </div>\n                                })\n                                }\n                            </div>\n                        </div>*/}\n                    )}\n            </div>\n        </div>\n    )\n};\n\nexport default ModulePermissionComponent;"]},"metadata":{},"sourceType":"module"}