{"ast":null,"code":"import _slicedToArray from \"/var/www/html/midOhio/fresh-trak/sourceCode/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/var/www/html/midOhio/fresh-trak/sourceCode/frontend/src/Modules/Agency/AgencyComponent.js\";\nimport React, { useState, useEffect } from 'react';\nimport 'react-bootstrap';\nimport { ajaxPost, ajaxGet, ajaxPut } from '../../Services/Http/Ajax';\nimport * as constants from '../../Utils/Constants';\nimport { Redirect } from 'react-router-dom';\nimport { showMessage, confirm } from '../../Utils/Util';\nimport { API_URL } from '../../Utils/Urls';\nimport { STATUS_ACTIVE } from \"../../Utils/Constants\";\nimport { Form } from 'react-bootstrap';\nimport '../../App.css';\nimport { ToastContainer } from \"react-toastify\";\nimport { validateName, validateAddress } from '../../Utils/Validation';\nimport MenuComponent from \"../General/MenuComponent\";\nlet isNameValid,\n    isAddressValid = false;\n\nconst AgencyComponent = props => {\n  const _useState = useState(false),\n        _useState2 = _slicedToArray(_useState, 2),\n        esign = _useState2[0],\n        setSign = _useState2[1];\n\n  const _useState3 = useState(false),\n        _useState4 = _slicedToArray(_useState3, 2),\n        data = _useState4[0],\n        setData = _useState4[1];\n\n  const _useState5 = useState(''),\n        _useState6 = _slicedToArray(_useState5, 2),\n        name = _useState6[0],\n        setName = _useState6[1];\n\n  const _useState7 = useState(''),\n        _useState8 = _slicedToArray(_useState7, 2),\n        nickname = _useState8[0],\n        setNickname = _useState8[1];\n\n  const _useState9 = useState(''),\n        _useState10 = _slicedToArray(_useState9, 2),\n        status_id = _useState10[0],\n        setStatus_id = _useState10[1];\n\n  const _useState11 = useState(''),\n        _useState12 = _slicedToArray(_useState11, 2),\n        address1 = _useState12[0],\n        setAddress1 = _useState12[1];\n\n  const _useState13 = useState(''),\n        _useState14 = _slicedToArray(_useState13, 2),\n        address2 = _useState14[0],\n        setAddress2 = _useState14[1];\n\n  const _useState15 = useState(''),\n        _useState16 = _slicedToArray(_useState15, 2),\n        logo = _useState16[0],\n        setLogo = _useState16[1];\n\n  const _useState17 = useState(''),\n        _useState18 = _slicedToArray(_useState17, 2),\n        notes = _useState18[0],\n        setNotes = _useState18[1];\n\n  const _useState19 = useState(props.location.state),\n        _useState20 = _slicedToArray(_useState19, 2),\n        id = _useState20[0],\n        setId = _useState20[1];\n\n  let isAgencyUpdate = !!props.location.state;\n  let buttonLabel = isAgencyUpdate ? 'Update' : 'Register';\n  useEffect(() => {\n    if (isAgencyUpdate) {\n      let agencyData;\n      let agencyId = id.agencyId;\n      let uri = API_URL.EDITED_URL + '/' + agencyId + '/update';\n      ajaxGet(uri, response => {\n        if (response.status === STATUS_ACTIVE) {\n          agencyData = response.content;\n          let agencyArray = agencyData.map(agency => {\n            return {\n              agency\n            };\n          });\n          setName(agencyArray[0].agency.name);\n          setNickname(agencyArray[0].agency.nickname);\n          setAddress1(agencyArray[0].agency.address1);\n          setAddress2(agencyArray[0].agency.address2);\n          setSign(agencyArray[0].agency.esign);\n          setData(agencyArray[0].agency.data);\n          setLogo(agencyArray[0].agency.logo);\n          setNotes(agencyArray[0].agency.notes);\n        } else {\n          showMessage('error', response.message);\n        }\n      });\n    }\n  }, []);\n\n  const updateAgency = () => {\n    let payLoad = {\n      data: {\n        name: name,\n        nickname: nickname,\n        address1: address1,\n        address2: address2,\n        esign: esign,\n        data: data,\n        logo: logo,\n        notes: notes\n      }\n    };\n    let agencyId = id.agencyId;\n    let uri = API_URL.EDITED_URL + '/' + agencyId + '/update';\n    ajaxPut(uri, payLoad, createFamilySuccess);\n  };\n\n  const createFamilySuccess = response => {\n    if (response.status === STATUS_ACTIVE) {\n      showMessage('success', response.message);\n    }\n  };\n\n  const addAgency = e => {\n    e.preventDefault();\n    let title = \"Are you sure you want to proceed?\";\n    confirm(title, addAgencyConfirm);\n  };\n\n  const addAgencyConfirm = () => {\n    if (isAgencyUpdate) {\n      updateAgency();\n    } else {\n      let agencyDetails = {\n        name: name,\n        nickname: nickname,\n        status_id: status_id,\n        address1: address1,\n        address2: address2,\n        esign: esign,\n        data: data,\n        logo: logo,\n        notes: notes\n      };\n\n      if (agencyDetails) {\n        let uri = API_URL.AGENCY_URL;\n\n        if (isAddressValid && isNameValid) {\n          ajaxPost(uri, agencyDetails, response => {\n            if (response.status === constants.STATUS_ACTIVE) {\n              showMessage('success', response.message);\n            }\n          });\n        }\n      } else {\n        showMessage('error', 'Enter agency details');\n      }\n    }\n  };\n\n  const handleChange = e => {\n    let name = e.target.name;\n\n    switch (name) {\n      case 'name':\n        setName(e.target.value);\n        break;\n\n      case 'nickname':\n        setNickname(e.target.value);\n        break;\n\n      case 'address1':\n        setAddress1(e.target.value);\n        break;\n\n      case 'address2':\n        setAddress2(e.target.value);\n        break;\n\n      case 'esign':\n        setSign(e.target.checked);\n        break;\n\n      case 'data':\n        setData(e.target.checked);\n        break;\n\n      case 'logo':\n        setLogo(e.target.value);\n        break;\n\n      case 'notes':\n        setNotes(e.target.value);\n        break;\n\n      default:\n        break;\n    }\n  };\n\n  const validateName = e => {\n    if (name.length > 3 && name) {\n      isNameValid = true;\n    } else {\n      isNameValid = false;\n      showMessage('error', 'Username should not be empty and contain more than 3 letters');\n    }\n  };\n\n  const validatePrimaryAddress = e => {\n    const address1 = e.target.value;\n\n    if (address1 && validateAddress(address1)) {\n      isAddressValid = true;\n    } else {\n      isAddressValid = false;\n      showMessage('error', 'Enter a valid address');\n    }\n  };\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173\n    },\n    __self: this\n  }, React.createElement(MenuComponent, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174\n    },\n    __self: this\n  }), React.createElement(ToastContainer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176\n    },\n    __self: this\n  }, React.createElement(\"form\", {\n    className: \"form-horizontal\",\n    onSubmit: addAgency,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177\n    },\n    __self: this\n  }, React.createElement(\"fieldset\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    id: \"legend\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179\n    },\n    __self: this\n  }, React.createElement(\"legend\", {\n    className: \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180\n    },\n    __self: this\n  }, buttonLabel)), React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    className: \"control-label\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183\n    },\n    __self: this\n  }, \"Organization name\"), React.createElement(\"div\", {\n    className: \"controls\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"text\",\n    id: \"name\",\n    name: \"name\",\n    onChange: handleChange,\n    onBlur: validateName,\n    value: name,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    className: \"control-label\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191\n    },\n    __self: this\n  }, \"Organization nick name\"), React.createElement(\"div\", {\n    className: \"controls\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"text\",\n    id: \"nickname\",\n    name: \"nickname\",\n    onChange: handleChange,\n    value: nickname,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    className: \"control-label\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198\n    },\n    __self: this\n  }, \"Address 1\"), React.createElement(\"div\", {\n    className: \"controls\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"text\",\n    id: \"address1\",\n    name: \"address1\",\n    onChange: handleChange,\n    onBlur: validatePrimaryAddress,\n    value: address1,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    className: \"control-label\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206\n    },\n    __self: this\n  }, \"Address 2\"), React.createElement(\"div\", {\n    className: \"controls\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"text\",\n    id: \"address2\",\n    name: \"address2\",\n    onChange: handleChange,\n    value: address2,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    className: \"control-label\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214\n    },\n    __self: this\n  }, \"eSign\"), React.createElement(\"div\", {\n    className: \"controls\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215\n    },\n    __self: this\n  }, React.createElement(Form.Check, {\n    type: \"checkbox\",\n    name: \"esign\",\n    checked: esign,\n    onChange: handleChange,\n    value: esign,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    className: \"control-label\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222\n    },\n    __self: this\n  }, \"data\"), React.createElement(\"div\", {\n    className: \"controls\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223\n    },\n    __self: this\n  }, React.createElement(Form.Check, {\n    type: \"checkbox\",\n    name: \"data\",\n    checked: data,\n    onChange: handleChange,\n    value: data,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    className: \"control-label\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230\n    },\n    __self: this\n  }, \"Logo\"), React.createElement(\"div\", {\n    className: \"controls\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"text\",\n    name: \"logo\",\n    id: \"logo\",\n    onChange: handleChange,\n    value: logo,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    className: \"control-label\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237\n    },\n    __self: this\n  }, \"Notes\"), React.createElement(\"div\", {\n    className: \"controls\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"text\",\n    id: \"notes\",\n    name: \"notes\",\n    onChange: handleChange,\n    value: notes,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"form-group help-block\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"controls\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"btn btn-success\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245\n    },\n    __self: this\n  }, buttonLabel)))))));\n};\n\nexport default AgencyComponent;","map":{"version":3,"sources":["/var/www/html/midOhio/fresh-trak/sourceCode/frontend/src/Modules/Agency/AgencyComponent.js"],"names":["React","useState","useEffect","ajaxPost","ajaxGet","ajaxPut","constants","Redirect","showMessage","confirm","API_URL","STATUS_ACTIVE","Form","ToastContainer","validateName","validateAddress","MenuComponent","isNameValid","isAddressValid","AgencyComponent","props","esign","setSign","data","setData","name","setName","nickname","setNickname","status_id","setStatus_id","address1","setAddress1","address2","setAddress2","logo","setLogo","notes","setNotes","location","state","id","setId","isAgencyUpdate","buttonLabel","agencyData","agencyId","uri","EDITED_URL","response","status","content","agencyArray","map","agency","message","updateAgency","payLoad","createFamilySuccess","addAgency","e","preventDefault","title","addAgencyConfirm","agencyDetails","AGENCY_URL","handleChange","target","value","checked","length","validatePrimaryAddress"],"mappings":"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","sourcesContent":["import React,{useState, useEffect} from 'react'\nimport 'react-bootstrap'\nimport {ajaxPost,ajaxGet,ajaxPut} from '../../Services/Http/Ajax';\nimport * as constants from '../../Utils/Constants'\nimport {Redirect} from 'react-router-dom';\nimport {showMessage,confirm} from '../../Utils/Util';\nimport {API_URL} from '../../Utils/Urls';\nimport {STATUS_ACTIVE} from \"../../Utils/Constants\";\nimport {Form} from 'react-bootstrap'\nimport '../../App.css';\nimport {ToastContainer} from \"react-toastify\";\nimport {validateName,validateAddress} from '../../Utils/Validation';\nimport MenuComponent from \"../General/MenuComponent\";\nlet isNameValid, isAddressValid = false;\n\nconst AgencyComponent = (props) => {\n    const [esign,setSign] = useState(false);\n    const [data,setData] = useState(false);\n    const [name,setName] = useState('');\n    const [nickname,setNickname] = useState('');\n    const [status_id,setStatus_id] = useState('');\n    const [address1,setAddress1] = useState('');\n    const [address2,setAddress2] = useState('');\n    const [logo,setLogo] = useState('');\n    const [notes,setNotes] = useState('');\n    const [id, setId] = useState(props.location.state);\n    let isAgencyUpdate = !!props.location.state;\n    let buttonLabel = isAgencyUpdate ? 'Update' : 'Register';\n\n    useEffect(() => {\n        if (isAgencyUpdate){\n            let agencyData;\n            let agencyId = id.agencyId;\n            let uri = API_URL.EDITED_URL + '/' + agencyId + '/update';\n            ajaxGet(uri, (response) => {\n                if (response.status === STATUS_ACTIVE) {\n                    agencyData = response.content;\n                    let agencyArray = agencyData.map(agency => {\n                        return {agency}\n                    });\n                    setName(agencyArray[0].agency.name);\n                    setNickname(agencyArray[0].agency.nickname);\n                    setAddress1(agencyArray[0].agency.address1);\n                    setAddress2(agencyArray[0].agency.address2);\n                    setSign(agencyArray[0].agency.esign);\n                    setData(agencyArray[0].agency.data);\n                    setLogo(agencyArray[0].agency.logo);\n                    setNotes(agencyArray[0].agency.notes);\n                }\n                else {\n                    showMessage('error',response.message)\n                }\n            })\n        }\n    }, []);\n\n    const updateAgency = () => {\n        let payLoad = {\n            data: {\n                name: name,\n                nickname: nickname,\n                address1: address1,\n                address2: address2,\n                esign: esign,\n                data: data,\n                logo: logo,\n                notes: notes,\n            }\n        };\n        let agencyId = id.agencyId;\n        let uri = API_URL.EDITED_URL + '/' + agencyId + '/update';\n        ajaxPut(uri, payLoad, createFamilySuccess)\n    };\n\n    const createFamilySuccess = (response) => {\n        if(response.status === STATUS_ACTIVE) {\n            showMessage('success',response.message);\n        }\n    };\n\n    const addAgency = (e) => {\n        e.preventDefault();\n        let title = \"Are you sure you want to proceed?\";\n        confirm(title, addAgencyConfirm)\n    };\n\n    const addAgencyConfirm = () => {\n        if (isAgencyUpdate) {\n            updateAgency();\n        }\n        else {\n            let agencyDetails = {\n                name: name,\n                nickname: nickname,\n                status_id: status_id,\n                address1: address1,\n                address2: address2,\n                esign: esign,\n                data: data,\n                logo: logo,\n                notes: notes,\n            };\n            if (agencyDetails) {\n                let uri = API_URL.AGENCY_URL;\n                if (isAddressValid && isNameValid) {\n                    ajaxPost(uri, agencyDetails, (response) => {\n                        if (response.status === constants.STATUS_ACTIVE) {\n                            showMessage('success', response.message)\n                        }\n                    });\n                }\n            }\n            else {\n                showMessage('error', 'Enter agency details')\n            }\n        }\n    };\n\n    const handleChange = (e) => {\n        let name = e.target.name;\n        switch (name) {\n            case 'name':\n                setName(e.target.value);\n                break;\n            case 'nickname':\n                setNickname(e.target.value);\n                break;\n            case 'address1':\n                setAddress1(e.target.value);\n                break;\n            case 'address2':\n                setAddress2(e.target.value);\n                break;\n            case 'esign':\n                setSign(e.target.checked);\n                break;\n            case 'data':\n                setData(e.target.checked);\n                break;\n            case 'logo':\n                setLogo(e.target.value);\n                break;\n            case 'notes':\n                setNotes(e.target.value);\n                break;\n            default:\n                break;\n        }\n    };\n\n    const validateName = (e) => {\n        if ((name.length > 3) && (name)){\n            isNameValid = true;\n        }\n        else {\n            isNameValid = false;\n            showMessage('error', 'Username should not be empty and contain more than 3 letters')\n        }\n    };\n\n    const validatePrimaryAddress = (e) => {\n        const address1 = e.target.value;\n        if ((address1) && validateAddress(address1)) {\n            isAddressValid = true;\n        }\n            else {\n            isAddressValid = false;\n                showMessage('error','Enter a valid address')\n            }\n        };\n\n        return (\n            <div>\n                <MenuComponent/>\n                <ToastContainer/>\n                <div className=\"container\">\n                <form className=\"form-horizontal\" onSubmit={addAgency}>\n                    <fieldset>\n                    <div id=\"legend\">\n                        <legend className=\"\">{buttonLabel}</legend>\n                    </div>\n                    <div className=\"form-group\">\n                        <label className=\"control-label\">Organization name</label>\n                        <div className=\"controls\">\n                            <input type=\"text\" id=\"name\" name=\"name\" onChange={handleChange} onBlur={validateName} value={name}/>\n                        </div>\n                    </div>\n\n\n                    <div className=\"form-group\">\n                        <label className=\"control-label\">Organization nick name</label>\n                        <div className=\"controls\">\n                            <input type=\"text\" id=\"nickname\" name=\"nickname\" onChange={handleChange} value={nickname}/>\n                        </div>\n                    </div>\n\n                    <div className=\"form-group\">\n                        <label className=\"control-label\">Address 1</label>\n                        <div className=\"controls\">\n                            <input type=\"text\" id=\"address1\" name=\"address1\" onChange={handleChange} onBlur={validatePrimaryAddress} value={address1}/>\n                        </div>\n                    </div>\n\n\n                    <div className=\"form-group\">\n                        <label className=\"control-label\">Address 2</label>\n                        <div className=\"controls\">\n                            <input type=\"text\" id=\"address2\" name=\"address2\" onChange={handleChange} value={address2}/>\n                        </div>\n                    </div>\n\n\n                    <div className=\"form-group\">\n                        <label className=\"control-label\">eSign</label>\n                        <div className=\"controls\">\n                            <Form.Check type=\"checkbox\" name=\"esign\" checked={esign} onChange = {handleChange} value={esign}/>\n                        </div>\n                    </div>\n\n\n                    <div className=\"form-group\">\n                        <label className=\"control-label\">data</label>\n                        <div className=\"controls\">\n                            <Form.Check type=\"checkbox\" name=\"data\" checked={data} onChange = {handleChange} value={data}/>\n                        </div>\n                    </div>\n\n\n                    <div className=\"form-group\">\n                        <label className=\"control-label\">Logo</label>\n                        <div className=\"controls\">\n                        <input type=\"text\" name=\"logo\" id=\"logo\" onChange={handleChange} value={logo} />\n                        </div>\n                    </div>\n\n                    <div className=\"form-group\">\n                        <label className=\"control-label\">Notes</label>\n                        <div className=\"controls\">\n                            <input type=\"text\" id=\"notes\" name=\"notes\" onChange={handleChange} value={notes}/>\n                        </div>\n                    </div>\n\n                    <div className=\"form-group help-block\">\n                        <div className=\"controls\">\n                            <button type=\"submit\" className=\"btn btn-success\">{buttonLabel}</button>\n                        </div>\n                    </div>\n                    </fieldset>\n                </form>\n                </div>\n            </div>\n        )\n};\nexport default AgencyComponent"]},"metadata":{},"sourceType":"module"}