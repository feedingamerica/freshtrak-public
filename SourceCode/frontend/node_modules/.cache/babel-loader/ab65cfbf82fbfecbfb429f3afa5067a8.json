{"ast":null,"code":"import _slicedToArray from \"/var/www/html/midOhio/fresh-trak/sourceCode/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/var/www/html/midOhio/fresh-trak/sourceCode/frontend/src/Modules/Agency/AgencyComponent.js\";\nimport React, { useState, useEffect } from 'react';\nimport 'react-bootstrap';\nimport { ajaxPost, ajaxGet, ajaxPut } from '../../Services/Http/Ajax';\nimport * as constants from '../../Utils/Constants';\nimport { Redirect } from 'react-router-dom';\nimport { showMessage, confirm } from '../../Utils/Util';\nimport { API_URL } from '../../Utils/Urls';\nimport { STATUS_ACTIVE } from \"../../Utils/Constants\";\nimport { Form } from 'react-bootstrap';\nimport '../../App.css';\nimport { ToastContainer } from \"react-toastify\";\nimport { validateName, validateAddress } from '../../Utils/Validation';\nimport MenuComponent from \"../General/MenuComponent\";\nlet isNameValid,\n    isAddressValid = false;\n\nconst AgencyComponent = props => {\n  const _useState = useState(false),\n        _useState2 = _slicedToArray(_useState, 2),\n        esign = _useState2[0],\n        setSign = _useState2[1];\n\n  const _useState3 = useState(false),\n        _useState4 = _slicedToArray(_useState3, 2),\n        data = _useState4[0],\n        setData = _useState4[1];\n\n  const _useState5 = useState(''),\n        _useState6 = _slicedToArray(_useState5, 2),\n        name = _useState6[0],\n        setName = _useState6[1];\n\n  const _useState7 = useState(''),\n        _useState8 = _slicedToArray(_useState7, 2),\n        nickname = _useState8[0],\n        setNickname = _useState8[1];\n\n  const _useState9 = useState(''),\n        _useState10 = _slicedToArray(_useState9, 2),\n        status_id = _useState10[0],\n        setStatus_id = _useState10[1];\n\n  const _useState11 = useState(''),\n        _useState12 = _slicedToArray(_useState11, 2),\n        address1 = _useState12[0],\n        setAddress1 = _useState12[1];\n\n  const _useState13 = useState(''),\n        _useState14 = _slicedToArray(_useState13, 2),\n        address2 = _useState14[0],\n        setAddress2 = _useState14[1];\n\n  const _useState15 = useState(''),\n        _useState16 = _slicedToArray(_useState15, 2),\n        logo = _useState16[0],\n        setLogo = _useState16[1];\n\n  const _useState17 = useState(''),\n        _useState18 = _slicedToArray(_useState17, 2),\n        notes = _useState18[0],\n        setNotes = _useState18[1];\n\n  const _useState19 = useState(props.location.state),\n        _useState20 = _slicedToArray(_useState19, 2),\n        id = _useState20[0],\n        setId = _useState20[1];\n\n  let isAgencyUpdate = !!props.location.state;\n  let buttonLabel = isAgencyUpdate ? 'Update' : 'Register';\n  useEffect(() => {\n    if (isAgencyUpdate) {\n      let agencyData;\n      let agencyId = id.agencyId;\n      let uri = API_URL.EDITED_URL + '/' + agencyId + '/update';\n      ajaxGet(uri, response => {\n        if (response.status === STATUS_ACTIVE) {\n          agencyData = response.content;\n          let agencyArray = agencyData.map(agency => {\n            return {\n              agency\n            };\n          });\n          setName(agencyArray[0].agency.name);\n          setAddress1(agencyArray[0].agency.address1);\n        } else {\n          showMessage('error', response.message);\n        }\n      });\n    }\n  }, []);\n\n  const updateAgency = () => {\n    let payLoad = {\n      data: {\n        name: name,\n        address1: address1\n      }\n    };\n    let agencyId = id.agencyId;\n    let uri = API_URL.EDITED_URL + '/' + agencyId + '/update';\n    ajaxPut(uri, payLoad, createFamilySuccess);\n  };\n\n  const createFamilySuccess = response => {\n    if (response.status === STATUS_ACTIVE) {\n      showMessage('success', response.message);\n    }\n  };\n\n  const addAgency = e => {\n    e.preventDefault();\n    let title = \"Are you sure you want to proceed?\";\n    confirm(title, addAgencyConfirm);\n  };\n\n  const addAgencyConfirm = () => {\n    if (isAgencyUpdate) {\n      updateAgency();\n    } else {\n      let agencyDetails = {\n        name: name,\n        nickname: nickname,\n        status_id: status_id,\n        address1: address1,\n        address2: address2,\n        esign: esign,\n        data: data,\n        logo: logo,\n        notes: notes\n      };\n\n      if (agencyDetails) {\n        let uri = API_URL.AGENCY_URL;\n\n        if (isAddressValid && isNameValid) {\n          ajaxPost(uri, agencyDetails, response => {\n            if (response.status === constants.STATUS_ACTIVE) {\n              showMessage('success', response.message);\n            }\n          });\n        }\n      } else {\n        showMessage('error', 'Enter agency details');\n      }\n    }\n  };\n\n  const handleChange = e => {\n    let name = e.target.name;\n\n    switch (name) {\n      case 'name':\n        setName(e.target.value);\n        break;\n\n      case 'nickname':\n        setNickname(e.target.value);\n        break;\n\n      case 'address1':\n        setAddress1(e.target.value);\n        break;\n\n      case 'address2':\n        setAddress2(e.target.value);\n        break;\n\n      case 'esign':\n        setSign(e.target.checked);\n        break;\n\n      case 'data':\n        setData(e.target.checked);\n        break;\n\n      case 'logo':\n        setLogo(e.target.value);\n        break;\n\n      case 'notes':\n        setNotes(e.target.value);\n        break;\n\n      default:\n        break;\n    }\n  };\n\n  const validateName = e => {\n    if (name.length > 3 && name) {\n      isNameValid = true;\n    } else {\n      isNameValid = false;\n      showMessage('error', 'Username should not be empty and contain more than 3 letters');\n    }\n  };\n\n  const validatePrimaryAddress = e => {\n    const address1 = e.target.value;\n\n    if (address1 && validateAddress(address1)) {\n      isAddressValid = true;\n    } else {\n      isAddressValid = false;\n      showMessage('error', 'Enter a valid address');\n    }\n  };\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162\n    },\n    __self: this\n  }, React.createElement(MenuComponent, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163\n    },\n    __self: this\n  }), React.createElement(ToastContainer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165\n    },\n    __self: this\n  }, React.createElement(\"form\", {\n    className: \"form-horizontal\",\n    onSubmit: addAgency,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166\n    },\n    __self: this\n  }, React.createElement(\"fieldset\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    id: \"legend\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168\n    },\n    __self: this\n  }, React.createElement(\"legend\", {\n    className: \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169\n    },\n    __self: this\n  }, buttonLabel)), React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    className: \"control-label\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172\n    },\n    __self: this\n  }, \"Organization name\"), React.createElement(\"div\", {\n    className: \"controls\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"text\",\n    id: \"name\",\n    name: \"name\",\n    onChange: handleChange,\n    onBlur: validateName,\n    value: name,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174\n    },\n    __self: this\n  }))), !isAgencyUpdate && React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    className: \"control-label\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180\n    },\n    __self: this\n  }, \"Organization nick name\"), React.createElement(\"div\", {\n    className: \"controls\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"text\",\n    id: \"nickname\",\n    name: \"nickname\",\n    onChange: handleChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    className: \"control-label\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187\n    },\n    __self: this\n  }, \"Address 1\"), React.createElement(\"div\", {\n    className: \"controls\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"text\",\n    id: \"address1\",\n    name: \"address1\",\n    onChange: handleChange,\n    onBlur: validatePrimaryAddress,\n    value: address1,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189\n    },\n    __self: this\n  }))), !isAgencyUpdate && React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    className: \"control-label\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195\n    },\n    __self: this\n  }, \"Address 2\"), React.createElement(\"div\", {\n    className: \"controls\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"text\",\n    id: \"address2\",\n    name: \"address2\",\n    onChange: handleChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197\n    },\n    __self: this\n  }))), !isAgencyUpdate && React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    className: \"control-label\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203\n    },\n    __self: this\n  }, \"eSign\"), React.createElement(\"div\", {\n    className: \"controls\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204\n    },\n    __self: this\n  }, React.createElement(Form.Check, {\n    type: \"checkbox\",\n    name: \"esign\",\n    checked: esign,\n    onChange: handleChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205\n    },\n    __self: this\n  }))), !isAgencyUpdate && React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    className: \"control-label\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211\n    },\n    __self: this\n  }, \"data\"), React.createElement(\"div\", {\n    className: \"controls\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212\n    },\n    __self: this\n  }, React.createElement(Form.Check, {\n    type: \"checkbox\",\n    name: \"data\",\n    checked: data,\n    onChange: handleChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213\n    },\n    __self: this\n  }))), !isAgencyUpdate && React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    className: \"control-label\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219\n    },\n    __self: this\n  }, \"Logo\"), React.createElement(\"div\", {\n    className: \"controls\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"text\",\n    id: \"logo\",\n    name: \"logo\",\n    onChange: handleChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221\n    },\n    __self: this\n  }))), !isAgencyUpdate && React.createElement(\"div\", {\n    className: \"form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225\n    },\n    __self: this\n  }, React.createElement(\"label\", {\n    className: \"control-label\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226\n    },\n    __self: this\n  }, \"Notes\"), React.createElement(\"div\", {\n    className: \"controls\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"text\",\n    id: \"notes\",\n    name: \"notes\",\n    onChange: handleChange,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228\n    },\n    __self: this\n  }))), React.createElement(\"div\", {\n    className: \"form-group help-block\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"controls\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233\n    },\n    __self: this\n  }, React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"btn btn-success\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234\n    },\n    __self: this\n  }, buttonLabel)))))));\n};\n\nexport default AgencyComponent;","map":{"version":3,"sources":["/var/www/html/midOhio/fresh-trak/sourceCode/frontend/src/Modules/Agency/AgencyComponent.js"],"names":["React","useState","useEffect","ajaxPost","ajaxGet","ajaxPut","constants","Redirect","showMessage","confirm","API_URL","STATUS_ACTIVE","Form","ToastContainer","validateName","validateAddress","MenuComponent","isNameValid","isAddressValid","AgencyComponent","props","esign","setSign","data","setData","name","setName","nickname","setNickname","status_id","setStatus_id","address1","setAddress1","address2","setAddress2","logo","setLogo","notes","setNotes","location","state","id","setId","isAgencyUpdate","buttonLabel","agencyData","agencyId","uri","EDITED_URL","response","status","content","agencyArray","map","agency","message","updateAgency","payLoad","createFamilySuccess","addAgency","e","preventDefault","title","addAgencyConfirm","agencyDetails","AGENCY_URL","handleChange","target","value","checked","length","validatePrimaryAddress"],"mappings":"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","sourcesContent":["import React,{useState, useEffect} from 'react'\nimport 'react-bootstrap'\nimport {ajaxPost,ajaxGet,ajaxPut} from '../../Services/Http/Ajax';\nimport * as constants from '../../Utils/Constants'\nimport {Redirect} from 'react-router-dom';\nimport {showMessage,confirm} from '../../Utils/Util';\nimport {API_URL} from '../../Utils/Urls';\nimport {STATUS_ACTIVE} from \"../../Utils/Constants\";\nimport {Form} from 'react-bootstrap'\nimport '../../App.css';\nimport {ToastContainer} from \"react-toastify\";\nimport {validateName,validateAddress} from '../../Utils/Validation';\nimport MenuComponent from \"../General/MenuComponent\";\nlet isNameValid, isAddressValid = false;\n\nconst AgencyComponent = (props) => {\n\n    const [esign,setSign] = useState(false);\n    const [data,setData] = useState(false);\n    const [name,setName] = useState('');\n    const [nickname,setNickname] = useState('');\n    const [status_id,setStatus_id] = useState('');\n    const [address1,setAddress1] = useState('');\n    const [address2,setAddress2] = useState('');\n    const [logo,setLogo] = useState('');\n    const [notes,setNotes] = useState('');\n    const [id, setId] = useState(props.location.state);\n    let isAgencyUpdate = !!props.location.state;\n    let buttonLabel = isAgencyUpdate ? 'Update' : 'Register';\n\n    useEffect(() => {\n        if (isAgencyUpdate){\n            let agencyData;\n            let agencyId = id.agencyId;\n            let uri = API_URL.EDITED_URL + '/' + agencyId + '/update';\n            ajaxGet(uri, (response) => {\n                if (response.status === STATUS_ACTIVE) {\n                    agencyData = response.content;\n                    let agencyArray = agencyData.map(agency => {\n                        return {agency}\n                    });\n                    setName(agencyArray[0].agency.name);\n                    setAddress1(agencyArray[0].agency.address1);\n                }\n                else {\n                    showMessage('error',response.message)\n                }\n            })\n        }\n    }, []);\n\n    const updateAgency = () => {\n        let payLoad = {\n            data: {\n                name: name,\n                address1: address1\n            }\n        };\n        let agencyId = id.agencyId;\n        let uri = API_URL.EDITED_URL + '/' + agencyId + '/update';\n        ajaxPut(uri, payLoad, createFamilySuccess)\n    };\n\n    const createFamilySuccess = (response) => {\n        if(response.status === STATUS_ACTIVE) {\n            showMessage('success',response.message);\n        }\n    };\n\n    const addAgency = (e) => {\n        e.preventDefault();\n        let title = \"Are you sure you want to proceed?\";\n        confirm(title, addAgencyConfirm)\n    };\n\n    const addAgencyConfirm = () => {\n        if (isAgencyUpdate) {\n            updateAgency();\n        }\n        else {\n            let agencyDetails = {\n                name: name,\n                nickname: nickname,\n                status_id: status_id,\n                address1: address1,\n                address2: address2,\n                esign: esign,\n                data: data,\n                logo: logo,\n                notes: notes,\n            };\n            if (agencyDetails) {\n                let uri = API_URL.AGENCY_URL;\n                if (isAddressValid && isNameValid) {\n                    ajaxPost(uri, agencyDetails, (response) => {\n                        if (response.status === constants.STATUS_ACTIVE) {\n                            showMessage('success', response.message)\n                        }\n                    });\n                }\n            }\n            else {\n                showMessage('error', 'Enter agency details')\n            }\n        }\n    };\n\n    const handleChange = (e) => {\n        let name = e.target.name;\n        switch (name) {\n            case 'name':\n                setName(e.target.value);\n                break;\n            case 'nickname':\n                setNickname(e.target.value);\n                break;\n            case 'address1':\n                setAddress1(e.target.value);\n                break;\n            case 'address2':\n                setAddress2(e.target.value);\n                break;\n            case 'esign':\n                setSign(e.target.checked);\n                break;\n            case 'data':\n                setData(e.target.checked);\n                break;\n            case 'logo':\n                setLogo(e.target.value);\n                break;\n            case 'notes':\n                setNotes(e.target.value);\n                break;\n            default:\n                break;\n        }\n    };\n\n    const validateName = (e) => {\n        if ((name.length > 3) && (name)){\n            isNameValid = true;\n        }\n        else {\n            isNameValid = false;\n            showMessage('error', 'Username should not be empty and contain more than 3 letters')\n        }\n    };\n\n    const validatePrimaryAddress = (e) => {\n        const address1 = e.target.value;\n        if ((address1) && validateAddress(address1)) {\n            isAddressValid = true;\n        }\n            else {\n            isAddressValid = false;\n                showMessage('error','Enter a valid address')\n            }\n        };\n\n        return (\n            <div>\n                <MenuComponent/>\n                <ToastContainer/>\n                <div className=\"container\">\n                <form className=\"form-horizontal\" onSubmit={addAgency}>\n                    <fieldset>\n                    <div id=\"legend\">\n                        <legend className=\"\">{buttonLabel}</legend>\n                    </div>\n                    <div className=\"form-group\">\n                        <label className=\"control-label\">Organization name</label>\n                        <div className=\"controls\">\n                            <input type=\"text\" id=\"name\" name=\"name\" onChange={handleChange} onBlur={validateName} value={name}/>\n                        </div>\n                    </div>\n\n                        {!isAgencyUpdate && (\n                    <div className=\"form-group\">\n                        <label className=\"control-label\">Organization nick name</label>\n                        <div className=\"controls\">\n                            <input type=\"text\" id=\"nickname\" name=\"nickname\" onChange={handleChange}/>\n                        </div>\n                    </div>)}\n\n                    <div className=\"form-group\">\n                        <label className=\"control-label\">Address 1</label>\n                        <div className=\"controls\">\n                            <input type=\"text\" id=\"address1\" name=\"address1\" onChange={handleChange} onBlur={validatePrimaryAddress} value={address1}/>\n                        </div>\n                    </div>\n\n                        {!isAgencyUpdate && (\n                    <div className=\"form-group\">\n                        <label className=\"control-label\">Address 2</label>\n                        <div className=\"controls\">\n                            <input type=\"text\" id=\"address2\" name=\"address2\" onChange={handleChange}/>\n                        </div>\n                    </div>)}\n\n                        {!isAgencyUpdate && (\n                    <div className=\"form-group\">\n                        <label className=\"control-label\">eSign</label>\n                        <div className=\"controls\">\n                            <Form.Check type=\"checkbox\" name=\"esign\" checked={esign} onChange = {handleChange} />\n                        </div>\n                    </div>)}\n\n                        {!isAgencyUpdate && (\n                    <div className=\"form-group\">\n                        <label className=\"control-label\">data</label>\n                        <div className=\"controls\">\n                            <Form.Check type=\"checkbox\" name=\"data\" checked={data} onChange = {handleChange} />\n                        </div>\n                    </div>)}\n\n                        {!isAgencyUpdate && (\n                    <div className=\"form-group\">\n                        <label className=\"control-label\">Logo</label>\n                        <div className=\"controls\">\n                            <input type=\"text\" id=\"logo\" name=\"logo\" onChange={handleChange}/>\n                        </div>\n                    </div>)}\n                        {!isAgencyUpdate && (\n                    <div className=\"form-group\">\n                        <label className=\"control-label\">Notes</label>\n                        <div className=\"controls\">\n                            <input type=\"text\" id=\"notes\" name=\"notes\" onChange={handleChange}/>\n                        </div>\n                    </div>)}\n\n                    <div className=\"form-group help-block\">\n                        <div className=\"controls\">\n                            <button type=\"submit\" className=\"btn btn-success\">{buttonLabel}</button>\n                        </div>\n                    </div>\n                    </fieldset>\n                </form>\n                </div>\n            </div>\n        )\n};\nexport default AgencyComponent"]},"metadata":{},"sourceType":"module"}