{"ast":null,"code":"var _jsxFileName = \"/var/www/html/midOhio/fresh-trak/sourceCode/frontend/src/Modules/MenuPermission/MenuPermissionComponent.js\";\n\n/**\n * Created by Basil on 6/1/20.\n */\nimport React, { Component } from 'react';\nimport '../../App.css';\nimport * as constants from '../../Utils/Constants';\nimport { ajaxPost } from '../../Services/Http/Ajax';\nimport Checkbox from \"../General/CheckBoxComponent\";\n\nclass MenuPermissionComponent extends Component {\n  constructor(props) {\n    super(props);\n\n    this.componentDidUpdate = prevProps => {\n      if (prevProps.menuId !== this.props.menuId || prevProps.roleId !== this.props.roleId) {\n        let menuData;\n        let roleId = this.props.roleId;\n        let mainMenuId = this.props.menuId;\n\n        if (roleId && mainMenuId) {\n          let data = {\n            roleId: roleId,\n            menuId: mainMenuId\n          };\n          let uri = constants.BASE_URL + '/api/menu/permission';\n          ajaxPost(uri, data, response => {\n            if (response.status === constants.STATUS_ACTIVE) {\n              menuData = response.content;\n              let subMenuArray = menuData.map(subMenus => {\n                const item = subMenus.subMenuId;\n                const isChecked = subMenus.is_active;\n                this.setState(prevState => ({\n                  checkedItems: prevState.checkedItems.set(item, isChecked)\n                }));\n                return {\n                  subMenus\n                };\n              });\n              this.setState({\n                subMenuArray: subMenuArray,\n                menuFetched: true,\n                isMainMenuActive: subMenuArray[0].subMenus.is_active\n              });\n            }\n          });\n        }\n      }\n    };\n\n    this.makeSubMenuCheckBoxDisabled = e => {\n      this.setState({\n        isMainMenuActive: e.target.checked\n      });\n    };\n\n    this.state = {\n      checkedItems: new Map(),\n      menuFetched: false,\n      subMenuArray: [],\n      isMainMenuActive: false\n    };\n    this.handleChange = this.handleChange.bind(this);\n  }\n\n  handleChange(e) {\n    console.log(this.state, 'firstOne');\n    debugger;\n    const item = e.target.name;\n    const isChecked = e.target.checked;\n    this.setState(prevState => ({\n      checkedItems: prevState.checkedItems.set(item, isChecked)\n    }));\n    console.log(this.state.checkedItems.get(isChecked), \"abi\");\n  }\n\n  render() {\n    const menuFetched = this.state.menuFetched;\n    const menuDetails = this.state.subMenuArray;\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"menu-permission\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, menuFetched && React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, \" \", React.createElement(\"b\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, \" \", menuDetails[0].subMenus.menu_name, \" \", React.createElement(\"input\", {\n      onChange: this.makeSubMenuCheckBoxDisabled,\n      checked: this.state.isMainMenuActive,\n      type: \"checkBox\",\n      name: \"menuPermission\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    })), menuDetails.map((value, index) => {\n      console.log(this.state.checkedItems.get(value.subMenus.subMenuId), \"<<<<<<<<<\");\n      return React.createElement(\"div\", {\n        key: index,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, value.subMenus.sub_menu_name, \" \", React.createElement(Checkbox, {\n        name: `${value.subMenus.subMenuId}`,\n        checked: this.state.checkedItems.get(value.subMenus.subMenuId),\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      })); //return <div key={index}>{value.subMenus.sub_menu_name} <input disabled={!this.state.isMainMenuActive} checked={value.subMenus.is_active} type=\"checkBox\" name={`subMenu_${value.subMenus.subMenuId}`}/></div>\n    }))));\n  }\n\n}\n\nexport default MenuPermissionComponent;","map":{"version":3,"sources":["/var/www/html/midOhio/fresh-trak/sourceCode/frontend/src/Modules/MenuPermission/MenuPermissionComponent.js"],"names":["React","Component","constants","ajaxPost","Checkbox","MenuPermissionComponent","constructor","props","componentDidUpdate","prevProps","menuId","roleId","menuData","mainMenuId","data","uri","BASE_URL","response","status","STATUS_ACTIVE","content","subMenuArray","map","subMenus","item","subMenuId","isChecked","is_active","setState","prevState","checkedItems","set","menuFetched","isMainMenuActive","makeSubMenuCheckBoxDisabled","e","target","checked","state","Map","handleChange","bind","console","log","name","get","render","menuDetails","menu_name","value","index","sub_menu_name"],"mappings":"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","sourcesContent":["/**\n * Created by Basil on 6/1/20.\n */\nimport React, {Component} from 'react';\nimport '../../App.css';\nimport * as constants from '../../Utils/Constants';\nimport {ajaxPost} from '../../Services/Http/Ajax';\nimport Checkbox from \"../General/CheckBoxComponent\";\nclass MenuPermissionComponent extends Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            checkedItems: new Map(),\n            menuFetched: false,\n            subMenuArray: [],\n            isMainMenuActive: false\n        }\n        this.handleChange = this.handleChange.bind(this);\n    }\n\n    componentDidUpdate = (prevProps) => {\n        if((prevProps.menuId !== this.props.menuId) || prevProps.roleId !== this.props.roleId) {\n            let menuData;\n            let roleId = this.props.roleId;\n            let mainMenuId = this.props.menuId;\n            if (roleId && mainMenuId) {\n                let data = {\n                    roleId: roleId,\n                    menuId: mainMenuId\n                };\n                let uri = constants.BASE_URL + '/api/menu/permission';\n                ajaxPost(uri, data, (response) => {\n                    if (response.status === constants.STATUS_ACTIVE) {\n                        menuData = response.content;\n                        let subMenuArray = menuData.map(subMenus => {\n                            const item = subMenus.subMenuId;\n                            const isChecked = subMenus.is_active;\n                            this.setState(prevState => ({ checkedItems: prevState.checkedItems.set(item, isChecked) }))\n                            return {subMenus}\n                        });\n                        this.setState({\n                            subMenuArray: subMenuArray,\n                            menuFetched: true,\n                            isMainMenuActive: subMenuArray[0].subMenus.is_active\n                        });\n                    }\n                })\n            }\n        }\n    };\n\n    makeSubMenuCheckBoxDisabled = (e) => {\n        this.setState({\n            isMainMenuActive: e.target.checked\n        });\n    };\n    handleChange(e) {\n        console.log(this.state,'firstOne');\n        debugger;\n        const item = e.target.name;\n        const isChecked = e.target.checked;\n        this.setState(prevState => ({ checkedItems: prevState.checkedItems.set(item, isChecked) }));\n        console.log(this.state.checkedItems.get(isChecked),\"abi\")\n    }\n    render() {\n        const { menuFetched } = this.state;\n        const menuDetails = this.state.subMenuArray;\n        return (\n            <div>\n                <div className=\"menu-permission\">\n                    {\n                        menuFetched && (\n                        <div> <b> {menuDetails[0].subMenus.menu_name} <input onChange={this.makeSubMenuCheckBoxDisabled} checked={this.state.isMainMenuActive} type=\"checkBox\" name=\"menuPermission\"/></b>\n                            { menuDetails.map( (value, index) => {\n                                console.log(this.state.checkedItems.get(value.subMenus.subMenuId),\"<<<<<<<<<\");\n                                return <div key={index}>{value.subMenus.sub_menu_name} <Checkbox name={`${value.subMenus.subMenuId}`} checked={this.state.checkedItems.get(value.subMenus.subMenuId)} onChange={this.handleChange} /></div>\n                                //return <div key={index}>{value.subMenus.sub_menu_name} <input disabled={!this.state.isMainMenuActive} checked={value.subMenus.is_active} type=\"checkBox\" name={`subMenu_${value.subMenus.subMenuId}`}/></div>\n                            })  }\n\n                        </div>\n                    )}\n                </div>\n            </div>\n        )\n    }\n}\nexport default MenuPermissionComponent;"]},"metadata":{},"sourceType":"module"}